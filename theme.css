/*

# Kakano Theme for Obsidian

Principles:
- **Strong color**
  Users should be able to easily select a color for each vault and have the theme generate shades and gradients automatically.
- **Help new users**
  Obsidian can be intimidating for new users. I think a good way to help with this is to clarify which parts of the window are user content (white background, strong contrast) and which are navigation and other controls (colored background, lower contrast).
- **Standardise controls**
  Obsidian’s exuberant plugin scene is fantastic, but it also means that there’s a lot of inconsistency in the design of controls and modals – even between core plugins. I’ve tried to find ways to make similar controls have similar appearance. Likewise, I’ve aimed to follow conventions from the underlying OS, such as having close controls on the left on macOS.
- **Be opinionated enough**
  I’d like Kakano to provide a great user experience by default without the user having to make any choices beyond their base color. It has settings, but I want each one to be there because different users genuinely have different needs, not just because I failed to make a decision.

*/

/* #region Plugin compatibility */

/* @plugins
core:
- audio-recorder
- backlink
- bookmarks
- command-palette
- daily-notes
- file-explorer
- file-recovery
- global-search
- graph
- note-composer
- outgoing-link
- outline
- page-preview
- properties-view
- random-note
- slash-commands
- starred
- switcher
- sync
- tag-pane
- templates
- word-count
- workspaces
community:
- calendar
- dataview
- obsidian-kanban
- obsidian-map-view
- obsidian-style-settings
- obsidian-tasks-plugin
- oz-clear-unused-images
- recent-files-obsidian
*/

/* #endregion */
/* #region Style Settings plugin config */

/* @settings

name: Kakano Theme
id: kakano-style
settings:
  -
    id: heading-baseColor
    title: Base color
    type: heading
    level: 1
    collapsed: false
  -
    id: infoText-baseColor
    description: "The Kakano theme uses a base color for each vault, and generates different shades and gradients from it. You can either select from one of the preset colors, or specify an exact color."
    type: info-text
    markdown: true
  -
    id: theme-setting-predefinedBaseColor
    title: 'Preset base color'
    description: 'If you just want a quick color, choose one of these.'
    type: class-select
    allowEmpty: true
    default: theme-setting-baseColorPreset-kahurangi
    options:
      -
        label: 'Use accent color'
        value: theme-setting-baseColorPreset-accent
      -
        label: 'Whero – Red'
        value: theme-setting-baseColorPreset-whero
      -
        label: 'Karaka – Orange'
        value: theme-setting-baseColorPreset-karaka
      -
        label: 'Kōwhai – Yellow'
        value: theme-setting-baseColorPreset-koowhai
      -
        label: 'Kākāriki – Green'
        value: theme-setting-baseColorPreset-kaakaariki
      -
        label: 'Kārikiōrangi – Cyan'
        value: theme-setting-baseColorPreset-kaarikioorangi
      -
        label: 'Kahurangi – Blue'
        value: theme-setting-baseColorPreset-kahurangi
      -
        label: 'Waiporoporo – Purple'
        value: theme-setting-baseColorPreset-waiporoporo
      -
        label: 'Māwhero – Pink'
        value: theme-setting-baseColorPreset-maawhero
      -
        label: 'Mangu – Black'
        value: theme-setting-baseColorPreset-mangu
      -
        label: 'Mā – White'
        value: theme-setting-baseColorPreset-maa
      -
        label: 'Kiwikiwi – Grey'
        value: theme-setting-baseColorPreset-kiwikiwi
  -
    id: base
    title: Exact base color
    description: 'Set an exact base color. Make sure "Preset base color" is empty, and click Save to apply.'
    type: variable-color
    format: hsl-split
    default: '#2176B0'
  -
    id: heading-otherColorSettings
    title: Other color settings
    type: heading
    level: 1
    collapsed: true
  -
    id: theme-value-gradientContrast
    title: 'Background gradient contrast'
    description: 'Degree of contrast for background gradients. Set to zero for a flat background color.'
    type: variable-number-slider
    default: 0.2
    min: 0
    max: 1
    step: 0.1
  -
    id: theme-setting-lightModeNoteBg
    title: 'Light mode note background'
    description: 'In light mode, note backgrounds can be full white (default) or near white with a slight tint of the base color.'
    type: class-select
    allowEmpty: false
    default: theme-setting-lightModeNoteBgFullWhite
    options:
      -
        label: 'Near white'
        value: theme-setting-lightModeNoteBgNearWhite
      -
        label: 'Full white'
        value: theme-setting-lightModeNoteBgFullWhite
  -
    id: theme-value-darkModeNoteBg
    title: 'Dark mode note background'
    description: 'In dark mode, note backgrounds can be near black (default) or full black. Near black is a bit easier on the eyes. Full black will save a little energy on OLED screens which will switch back pixels completely off. And some people just like the way it looks.'
    type: class-select
    allowEmpty: false
    default: theme-value-darkModeNoteBgNearBlack
    options:
      -
        label: 'Near black (less eye strain)'
        value: theme-value-darkModeNoteBgNearBlack
      -
        label: 'Full black (OLED screen will switch pixels off)'
        value: theme-value-darkModeNoteBgFullBlack
  -
    id: theme-setting-distinguishNonContentTabs
    title: "Distinguish non-editable tabs"
    description: "Most tabs have content created by you (e.g. notes, canvases, kanban charts) but some aren't directly editable (e.g. graphs, calendars, maps). When this setting is on, the non-editable tabs are shaded differently when inactive."
    default: true
    type: class-toggle
  -
    id: heading-layoutSettings
    title: Layout settings
    type: heading
    level: 1
    collapsed: true
  -
    id: theme-setting-mobileHorizontalPadding
    title: 'Mobile horizontal spacing'
    description: "Width of space to the left and right of the note content. Set to zero if you'd like the note to extend to the full width, 0.5 or 1 if you'd like to see your background gradient."
    type: variable-number-slider
    default: 0.5
    min: 0
    max: 1
    step: 0.5
  -
    id: setting-properties-position
    title: 'Properties position'
    description: 'Place properties before or after your main note content. Note that this only applies to Live Preview mode.'
    type: class-select
    allowEmpty: false
    default: 'setting-properties-position-above'
    options:
      -
        label: 'Above main note content'
        value: 'setting-properties-position-above'
      -
        label: 'Below main note content'
        value: 'setting-properties-position-below'
  -
    id: theme-setting-embeddedNoteTitleVisibility
    title: 'Embedded note titles'
    description: "When a note is embedded in another note, show or hide the source note's title."
    type: class-select
    allowEmpty: false
    default: theme-setting-embeddedNoteTitleVisibilityHover
    options:
      -
        label: 'Always hidden'
        value: theme-setting-embeddedNoteTitleVisibilityHide
      -
        label: 'Visible on hover'
        value: theme-setting-embeddedNoteTitleVisibilityHover
      -
        label: 'Always visible'
        value: theme-setting-embeddedNoteTitleVisibilityShow
  -
    id: heading-typographySettings
    title: Typography settings
    type: heading
    level: 1
    collapsed: true
  -
    id: theme-setting-headingScaleFactor
    title: 'Heading scale factor – desktop/tablet'
    description: 'Scale factor for heading sizes. Larger numbers will increase the difference between different heading sizes, smaller numbers will decrease the difference.'
    type: class-select
    allowEmpty: false
    default: theme-setting-headingScaleFactor1point2
    options:
      -
        label: '1.067 - Minor Second'
        value: theme-setting-headingScaleFactor1point067
      -
        label: '1.125 - Major Second'
        value: theme-setting-headingScaleFactor1point125
      -
        label: '1.200 - Minor Third'
        value: theme-setting-headingScaleFactor1point2
      -
        label: '1.250 - Major Third'
        value: theme-setting-headingScaleFactor1point25
      -
        label: '1.333 - Perfect Fourth'
        value: theme-setting-headingScaleFactor1point333
      -
        label: '1.414 - Augmented Fourth'
        value: theme-setting-headingScaleFactor1point414
      -
        label: '1.500 - Perfect Fifth'
        value: theme-setting-headingScaleFactor1point5
      -
        label: '1.618 - Golden Ratio'
        value: theme-setting-headingScaleFactor1point618
  -
    id: theme-setting-headingScaleFactorPhone
    title: 'Heading scale factor – phone'
    description: "Scale factor for heading sizes on smaller phone screens. With space at a premium, you'll usually want this to be smaller than the desktop scale factor"
    type: class-select
    allowEmpty: false
    default: theme-setting-headingScaleFactorPhone1point125
    options:
      -
        label: '1.067 - Minor Second'
        value: theme-setting-headingScaleFactorPhone1point067
      -
        label: '1.125 - Major Second'
        value: theme-setting-headingScaleFactorPhone1point125
      -
        label: '1.200 - Minor Third'
        value: theme-setting-headingScaleFactorPhone1point2
      -
        label: '1.250 - Major Third'
        value: theme-setting-headingScaleFactorPhone1point25
      -
        label: '1.333 - Perfect Fourth'
        value: theme-setting-headingScaleFactorPhone1point333
      -
        label: '1.414 - Augmented Fourth'
        value: theme-setting-headingScaleFactorPhone1point414
      -
        label: '1.500 - Perfect Fifth'
        value: theme-setting-headingScaleFactorPhone1point5
      -
        label: '1.618 - Golden Ratio'
        value: theme-setting-headingScaleFactorPhone1point618
  -
    id: heading-editorSettings
    title: Editor settings
    type: heading
    level: 1
    collapsed: true
  -
    id: theme-setting-highlightActiveLine
    title: 'Highlight active line'
    description: "Show a background color behind the active line while editing."
    type: class-toggle
  -
    id: heading-experimentalSettings
    title: Experimental settings
    type: heading
    level: 1
    collapsed: true
  -
    id: info-experimentalSettings
    title: These settings may be unfinished or unstable!
    description: "This section contains settings for Kakano features that you may find useful, but which aren't as finished as I'd like. They may also be features I don't use personally, so I'm less likely to notice if they have rough edges. If there's something here that you use, feel free to drop me some feedback in the [Github issues queue](https://github.com/isaacfreeman/kakano-obsidian-theme/issues), and I'll aim to improve features that I know have active users."
    type: info-text
    markdown: true
  -
    id: theme-setting-stickyEmbeddedLinks
    title: 'Embedded links scroll position'
    description: 'Embedded links can be placed at the below your content (so you scroll to the bottom to see them), or pinned so they stay visible as you scroll.'
    type: class-select
    allowEmpty: false
    default: 'theme-setting-stickyEmbeddedLinks-off'
    options:
      -
        label: 'Place below content (scroll down to view)'
        value: 'theme-setting-stickyEmbeddedLinks-off'
      -
        label: 'Pin (stay visible while content scrolls)'
        value: 'theme-setting-stickyEmbeddedLinks-on'
  -
    id: theme-setting-mobileCardsUI
    title: 'Mobile cards UI'
    description: "Scale the main workspace down when there's a modal in the foreground, creating a 3D cards effect. Currently unfinished, but you can see it when you open a prompt."
    type: class-toggle
  -
    id: theme-setting-fullWidthStatusBar
    title: 'Full width status bar'
    description: "If you have many items in your status bar, you may find that it overflows onto the sidebars. This setting will push the main app workspace up so the status bar can use the full window width."
    type: class-toggle
  -
    id: heading-customGradient
    title: Custom Gradient
    type: heading
    level: 2
    collapsed: true
  -
    id: theme-setting-customGradient
    title: 'Use a custom gradient for the background'
    description: "Kakano normally provides a smooth gradient background using the same hue as the base color. This setting overrides that so you can have a gradient with different hues top and bottom. Note that the colors you set here won't be used directly: they'll be lightened for light mode and darkened for dark mode."
    type: class-toggle
  -
    id: theme-color-customGradientBaseTop
    title: Custom Gradient Top
    description: 'Base color for the top of the gradient'
    type: variable-color
    format: hsl
    default: '#ff0000'
  -
    id: theme-color-customGradientBaseBottom
    title: Custom Gradient Bottom
    description: 'Base color for the bottom of the gradient'
    type: variable-color
    format: hsl
    default: '#0000ff'
*/

/* #endregion */

/* #region Custom properties */
/* #region   General */
body {
  --background-input: var(--theme-color-baseTransparent12);
  --background-modifier-message: var(--theme-color-noticeBg);
  --background-secondary: transparent;
  --callout-padding: 0.75em 1.5em;
  --checkbox-border-color-hover: var(--interactive-accent-hover);
  --checkbox-border-color: var(--interactive-accent);
  --checkbox-color: var(--interactive-accent);
  --code-normal: var(--text-normal);
  --divider-width: 0;
  --embed-background: var(--theme-color-baseTransparent12);
  --embed-border-bottom: none;
  --embed-border-left: none;
  --embed-border-right: none;
  --embed-border-top: none;
  --embed-padding: 1em;
  --file-line-width: 40rem;
  --file-margins: 0 2em;
  --font-ui-smaller: 0.8rem;
  --header-height: calc(var(--icon-size) + 1rem);
  --heading-spacing: 0.67em;
  --input-border-width: 2px;
  --list-marker-color-collapsed: var(--list-marker-color);
  --metadata-divider-width: 0;
  --metadata-gap: 0.5em;
  --metadata-property-background-hover: var(--nav-item-background-hover);
  --modal-border-color: black;
  --modal-border-width: 0;
  --modal-height: 85vh;
  --modal-max-height: calc(
    100vh - var(--safe-area-inset-top) - var(--safe-area-inset-bottom) - 2em
  );
  --modal-max-width: calc(
    100vw - var(--safe-area-inset-left) - var(--safe-area-inset-right) - 2em
  );
  --modal-width: 65rem;
  --nav-item-background-hover: var(--theme-color-baseTransparent75);
  --nav-item-children-margin-left: calc(
    1em - var(--nav-indentation-guide-width) / 2
  );
  --nav-item-children-padding-left: calc(
    1em - var(--nav-indentation-guide-width) / 2
  );
  --nav-item-color-highlighted: var(--nav-item-hover);
  --nav-item-padding: 0.375em 0.75em 0.375em 0.75em;
  --nav-item-parent-padding: 0.25em 0 0.25em 0;
  --p-spacing: 0;
  --pill-focus-left-adjust: 0;
  --pill-focus-width: 100%;
  --prompt-border-color: transparent;
  --prompt-border-width: 0;
  --ribbon-background-collapsed: transparent;
  --ribbon-background: transparent;
  --ribbon-width: 3em;
  --sidebar-markdown-font-size: calc(
    var(--font-text-size) * var(--theme-value-sidebarFontScalingFactor)
  );
  --slider-track-background: var(--theme-color-baseTransparent50);
  --status-bar-background: var(--theme-color-gradientTop);
  --status-bar-text-color: var(--text-normal);
  --tab-container-background: transparent;
  --tab-curve: calc(var(--tab-radius) * 0.5);
  --tab-outline-width: 0;
  --tab-radius-active: 0.25em;
  --tab-radius: 0.25em;
  --text-muted: color-mix(in srgb, var(--text-normal), transparent 60%);
  --titlebar-background-focused: transparent;
  --titlebar-background: transparent;

  /* Other new variables for this theme */
  --theme-color-dragTarget: var(--theme-color-baseTransparent50);
  --theme-color-dragTargetBg: var(--theme-color-baseTransparent25);
  --theme-color-graphViewBg: transparent;
  --theme-color-tabBgInactiveHover: var(--theme-color-baseTransparent75);
  --theme-color-tableHeaderBg: var(--theme-color-baseTransparent12);
  --theme-lineHeight-tight: 1.3rem;
  --theme-spacing-mobileHorizontalSpacing: calc(
    var(--theme-setting-mobileHorizontalPadding) * 1rem
  );
  --theme-length-checkboxBorderWidth: 1px;
  --theme-length-collapseIndicatorSize: 1.5rem;
  --theme-length-controlSetSpacing: 0.5rem;
  --theme-length-statusBarHeight: 2rem;
  --theme-value-sidebarFontScalingFactor: 0.8;
}
/* #endregion */
/* #region   Colors */
body {
  /* Base all theme colours off these */
  /* The base HSL variables will be overridden by Style Settings if installed, otherwise they'll use the accent colour. */
  --base-h: var(--accent-h);
  --base-s: var(--accent-s);
  --base-l: var(--accent-l);

  /* The base color, derived from either the accent or the Style Settings base color. Note that this may be overridden by one of the prest colours below. */
  --theme-color-base: hsl(var(--base-h), var(--base-s), var(--base-l));

  /*  Base colour variants */
  --theme-color-baseLightened95: color-mix(
    in srgb,
    var(--theme-color-base),
    white calc(100% * 0.95)
  );
  --theme-color-baseLightened85: color-mix(
    in srgb,
    var(--theme-color-base),
    white calc(100% * 0.85)
  );
  --theme-color-baseLightened80: color-mix(
    in srgb,
    var(--theme-color-base),
    white calc(100% * 0.8)
  );
  --theme-color-baseLightened70: color-mix(
    in srgb,
    var(--theme-color-base),
    white calc(100% * 0.7)
  );
  --theme-color-baseLightened60: color-mix(
    in srgb,
    var(--theme-color-base),
    white calc(100% * 0.6)
  );
  --theme-color-baseLightened40: color-mix(
    in srgb,
    var(--theme-color-base),
    white calc(100% * 0.4)
  );
  --theme-color-baseLightened25: color-mix(
    in srgb,
    var(--theme-color-base),
    white calc(100% * 0.25)
  );

  --theme-color-baseDarkened25: color-mix(
    in srgb,
    var(--theme-color-base),
    black calc(100% * 0.25)
  );
  --theme-color-baseDarkened40: color-mix(
    in srgb,
    var(--theme-color-base),
    black calc(100% * 0.4)
  );
  --theme-color-baseDarkened60: color-mix(
    in srgb,
    var(--theme-color-base),
    black calc(100% * 0.6)
  );
  --theme-color-baseDarkened70: color-mix(
    in srgb,
    var(--theme-color-base),
    black calc(100% * 0.7)
  );
  --theme-color-baseDarkened80: color-mix(
    in srgb,
    var(--theme-color-base),
    black calc(100% * 0.8)
  );
  --theme-color-baseDarkened85: color-mix(
    in srgb,
    var(--theme-color-base),
    black calc(100% * 0.85)
  );
  --theme-color-baseDarkened90: color-mix(
    in srgb,
    var(--theme-color-base),
    black calc(100% * 0.9)
  );

  /* Base color with transparency */
  --theme-color-baseTransparent50: hsla(
    var(--base-h),
    var(--base-s),
    var(--base-l),
    0.5
  );
  --theme-color-baseTransparent75: hsla(
    var(--base-h),
    var(--base-s),
    var(--base-l),
    0.75
  );
  --theme-color-baseTransparent25: hsla(
    var(--base-h),
    var(--base-s),
    var(--base-l),
    0.25
  );
  --theme-color-baseTransparent12: hsla(
    var(--base-h),
    var(--base-s),
    var(--base-l),
    0.12
  );
  --theme-color-lightenTransparent50: rgba(255, 255, 255, 0.5);
  --theme-color-lightenTransparent25: rgba(255, 255, 255, 0.25);
  --theme-color-darkenTransparent50: rgba(0, 0, 0, 0.5);
  --theme-color-darkenTransparent25: rgba(0, 0, 0, 0.25);

  /* Gradients */
  --theme-gradient-topToBottom: linear-gradient(
    0deg,
    var(--theme-color-gradientTop) 0%,
    var(--theme-color-gradientBottom) 100%
  );
  --theme-gradient-bottomToTop: linear-gradient(
    0deg,
    var(--theme-color-gradientBottom) 0%,
    var(--theme-color-gradientTop) 100%
  );
  /* 0 for flat colour with no gradient. 1 for extreme gradient. Default to 0.2, */
  --theme-value-gradientContrast: 0.2;
}

/* Preset base colours, if users don't want to set an exact colour.  */
body.css-settings-manager.theme-setting-baseColorPreset-accent {
  --base-h: var(--accent-h);
  --base-s: var(--accent-s);
  --base-l: var(--accent-l);
}
body.css-settings-manager.theme-setting-baseColorPreset-whero {
  --base-h: 0;
  --base-s: 61%;
  --base-l: 43%;
}
body.css-settings-manager.theme-setting-baseColorPreset-karaka {
  --base-h: 30;
  --base-s: 70%;
  --base-l: 50%;
}
body.css-settings-manager.theme-setting-baseColorPreset-koowhai {
  --base-h: 52;
  --base-s: 60%;
  --base-l: 45%;
}
body.css-settings-manager.theme-setting-baseColorPreset-kaakaariki {
  --base-h: 92;
  --base-s: 60%;
  --base-l: 39%;
}
body.css-settings-manager.theme-setting-baseColorPreset-kaarikioorangi {
  --base-h: 180;
  --base-s: 57%;
  --base-l: 47%;
}
body.css-settings-manager.theme-setting-baseColorPreset-kahurangi {
  --base-h: 215;
  --base-s: 67%;
  --base-l: 45%;
}
body.css-settings-manager.theme-setting-baseColorPreset-waiporoporo {
  --base-h: 275;
  --base-s: 67%;
  --base-l: 45%;
}
body.css-settings-manager.theme-setting-baseColorPreset-maawhero {
  --base-h: 335;
  --base-s: 60%;
  --base-l: 60%;
}
body.css-settings-manager.theme-setting-baseColorPreset-mangu {
  --base-h: 240;
  --base-s: 10%;
  --base-l: 2%;
}
body.css-settings-manager.theme-setting-baseColorPreset-maa {
  --base-h: 0;
  --base-s: 0%;
  --base-l: 90%;
}
body.css-settings-manager.theme-setting-baseColorPreset-kiwikiwi {
  --base-h: 40;
  --base-s: 2%;
  --base-l: 50%;
}
body,
body .metadata-property:not([data-property-key="tags"]),
body .metadata-property[data-property-key="tags"] {
  --pill-padding-x: 1em;
  --pill-padding-y: 0.125em;
}

/* Hues derived from base color */
.theme-light,
.theme-dark {
  --color-red: hsl(356, var(--base-s), var(--base-l));
  --color-orange: hsl(27, var(--base-s), var(--base-l));
  --color-yellow: hsl(57, var(--base-s), var(--base-l));
  --color-green: hsl(124, var(--base-s), var(--base-l));
  --color-cyan: hsl(179, var(--base-s), var(--base-l));
  --color-blue: hsl(219, var(--base-s), var(--base-l));
  --color-purple: hsl(253, var(--base-s), var(--base-l));
  --color-pink: hsl(331, var(--base-s), var(--base-l));

  --theme-color-redDarkened: hsl(
    356,
    calc(var(--base-s) * 1.5),
    calc(var(--base-l) * 0.5)
  );
  --theme-color-redLightened: hsl(
    356,
    calc(var(--base-s) * 1.5),
    calc(var(--base-l) * 1.5)
  );

  --theme-color-redVeryTransparent: hsla(
    356,
    var(--base-s),
    var(--base-l),
    0.25
  );
  --theme-color-redSlightlyTransparent: hsla(
    356,
    var(--base-s),
    var(--base-l),
    0.75
  );
  --theme-color-orangeVeryTransparent: hsla(
    27,
    var(--base-s),
    var(--base-l),
    0.25
  );
  --theme-color-orangeSlightlyTransparent: hsla(
    27,
    var(--base-s),
    var(--base-l),
    0.75
  );
  --theme-color-yellowVeryTransparent: hsla(
    57,
    var(--base-s),
    var(--base-l),
    0.25
  );
  --theme-color-yellowSlightlyTransparent: hsla(
    57,
    var(--base-s),
    var(--base-l),
    0.75
  );
  --theme-color-greenVeryTransparent: hsla(
    124,
    var(--base-s),
    var(--base-l),
    0.25
  );
  --theme-color-greenSlightlyTransparent: hsla(
    124,
    var(--base-s),
    var(--base-l),
    0.75
  );
}
/* #endregion */
/* #region   Light mode */
.theme-light,
.theme-light .theme-dark {
  /* Using `.theme-light .theme-dark` here because the Minimal Theme Settings plugin inserts `.theme-dark` into the DOM for the ribbon and left sidebar for `Light mode background contrast -> High contrast` even when the Minimal Theme isn't active. As lots of people will have Minimal Theme Settings enabled while using Kakano, I override it here. */

  /* Built-in variables */
  --background-modifier-active-hover-alt: var(--theme-color-baseLightened25);
  --background-modifier-active-hover: var(--theme-color-baseLightened60);
  --background-modifier-border-focus: var(--theme-color-base);
  --background-modifier-border: var(--theme-color-baseLightened25);
  --background-modifier-hover: var(--theme-color-base);
  --blockquote-border-color: var(--theme-color-baseLightened80);
  --collapse-icon-color: var(--theme-color-base);
  --collapse-icon-color-collapsed: var(--theme-color-base);
  --empty-pane-color: var(--theme-color-baseDarkened70);
  --icon-color-focused: white;
  --icon-color-hover: hsl(
    var(--base-h),
    calc(var(--base-s) * 0.2),
    calc(var(--base-l) * 1.5)
  );
  --icon-color-hover: white;
  --icon-color: var(--theme-color-base);
  --modal-background: var(--theme-color-baseLightened80);
  --nav-collapse-icon-color-collapsed: var(--theme-color-baseTransparent75);
  --nav-collapse-icon-color: var(--theme-color-baseTransparent75);
  --nav-indentation-guide-color: var(--theme-color-baseTransparent25);
  --nav-item-background-active: var(--theme-color-base);
  --nav-item-background-selected: var(--theme-color-baseTransparent25);
  --nav-item-color-active: var(--theme-color-baseLightened80);
  --nav-item-color: var(--theme-color-baseDarkened80);
  --nav-item-color-hover: white;
  --search-icon-color: var(--theme-color-base);
  --shadow-l: 0 0.125rem 0.5rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.5),
        0.2
      ),
    0 0.875rem 1.7rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.5),
        0.15
      ),
    0 2rem 6rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.5),
        0.25
      );
  --shadow-s: 0 0.0625rem 0.125rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.5),
        0.1
      ),
    0 0.25rem 0.5rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.5),
        0.075
      ),
    0 1rem 2rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.5),
        0.125
      );
  --status-bar-text-color: black;
  --tab-background-active: var(--background-primary);
  --tab-background-inactive: var(--theme-color-baseLightened80);
  --tag-color: hsl(
    var(--accent-h),
    calc(var(--accent-s)),
    calc(var(--accent-l) * 0.8)
  );
  --tag-background: hsl(var(--accent-h), var(--accent-s), var(--accent-l), 0.2);
  --text-normal: var(--theme-color-baseDarkened90);
  --text-faint: var(--theme-color-baseDarkened70);
  --background-prompt: var(--theme-color-baseLightened95);
  --interactive-accent: var(--theme-color-base);
  --interactive-accent-hover: var(--theme-color-base);
  --table-border-color: var(--theme-color-baseLightened60);
  --table-header-border-color: var(--theme-color-baseLightened60);

  --metadata-property-background: var(--theme-color-baseLightened95);
  --metadata-property-background-hover: var(--theme-color-baseLightened80);
  --metadata-label-background-active: var(--theme-color-baseLightened95);
  --metadata-input-background-active: var(--theme-color-baseLightened95);

  /* Background for content area */
  --background-primary: white;
  /* Background for controls area */
  --background-secondary: var(--theme-color-baseLightened60);

  /* New variables for this theme */
  --theme-color-activeLineHighlight: var(--theme-color-baseTransparent12);
  --theme-color-audioRecordingActive: var(--theme-color-redDarkened);
  --theme-color-blockId: var(--theme-color-baseLightened25);
  --theme-color-calendarBg: var(--theme-color-baseLightened80);
  --theme-color-calendarDayBg: var(--theme-color-lightenTransparent50);
  --theme-color-communityItemBg: var(--theme-color-baseLightened80);
  --theme-color-communityItemBgActive: var(--theme-color-base);
  --theme-color-communityItemBgHover: var(--theme-color-baseLightened60);
  --theme-color-communityItemBgSelected: var(--theme-color-baseLightened25);
  --theme-color-contentItemBg: var(--theme-color-lightenTransparent50);
  --theme-color-contentItemBgActive: var(--theme-color-base);
  --theme-color-contentItemBgHover: var(--theme-color-lightenTransparent25);
  --theme-color-control: var(--theme-color-baseDarkened70);
  --theme-color-controlActive: var(--theme-color-control);
  --theme-color-controlBg: var(--theme-color-baseLightened95);
  --theme-color-controlBgHover: var(--theme-color-base);
  --theme-color-controlBgLowWeight: var(--theme-color-lightenTransparent50);
  --theme-color-controlContentArea: var(--theme-color-base);
  --theme-color-controlContentAreaHover: var(--theme-color-baseLightened80);
  --theme-color-controlUIHover: var(--theme-color-baseLightened60);
  --theme-color-controlHover: var(--theme-color-baseLightened95);
  --theme-color-controlSetBg: var(--theme-color-baseLightened80);
  --theme-color-controlText: var(--theme-color-baseDarkened70);
  --theme-color-controlTextHover: var(--theme-color-baseLightened80);
  --theme-color-controlLightweightActive: var(--theme-color-baseLightened95);
  --theme-color-emptyStateBg: var(--theme-color-baseLightened80);
  --theme-color-graphLine: black; /* Canvas doesn't support color-mix */
  --theme-color-hotkey: var(--theme-color-base);
  --theme-color-inputBorder: var(--theme-color-baseLightened25);
  --theme-color-inputPlaceholder: var(--theme-color-base);
  --theme-color-interactiveActive: var(--theme-color-baseLightened25);
  --theme-color-kanbanLaneBg: var(--theme-color-baseLightened80);
  --theme-color-log: var(--theme-color-baseDarkened80);
  --theme-color-logBg: var(--theme-color-baseLightened25);
  --theme-color-modalContentBg: var(--theme-color-baseLightened60);
  --theme-color-menuBg: var(--theme-color-baseLightened80);
  --theme-color-mobileToolbarBg: var(--theme-color-baseLightened80);
  --theme-color-navFileTag: var(--theme-color-base);
  --theme-color-navFileTagActive: var(--nav-item-color-active);
  --theme-color-navFileTagActiveBorder: var(--nav-item-color-active);
  --theme-color-navFileTagBorder: var(--theme-color-base);
  --theme-color-navigationButtonBgHover: var(--theme-color-baseTransparent25);
  --theme-color-notice: var(--theme-color-baseLightened95);
  --theme-color-noticeBg: var(--theme-color-baseDarkened80);
  --theme-color-settingsBg: var(--theme-color-baseLightened80);
  --theme-color-settingsBgStripe: var(--theme-color-baseLightened95);
  --theme-color-settingsGroupBg: var(--theme-color-lightenTransparent50);
  --theme-color-suggestionBg: var(--theme-color-baseLightened85);
  --theme-color-switcherBgActive: var(--theme-color-base);
  --theme-color-tabNavBg: var(--theme-color-baseLightened70);
  --theme-color-tagBgSidebar: hsla(
    var(--accent-h),
    calc(var(--accent-s) * 1.5),
    calc(var(--accent-l) * 1),
    0.4
  );
  --theme-color-tagSidebar: hsl(
    var(--accent-h),
    calc(var(--accent-s) * 1.5),
    calc(var(--accent-l) * 0.4)
  );
  --theme-color-textMeta: var(--theme-color-base);
  --theme-color-textSelected: var(--theme-color-baseLightened80);
  --theme-color-textTabInactive: var(--theme-color-baseDarkened25);
  --theme-color-warningBg: var(--theme-color-baseLightened95);
  --theme-shadow-control: 0 1px 2px
    hsla(
      var(--base-h),
      calc(var(--base-s) * 1.5),
      calc(var(--base-l) * 0.75),
      0.5
    );
  --theme-shadow-graph: 0 0 0.75rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 1.5),
        calc(var(--base-l) * 0.5),
        0.8
      ),
    0 0 3.5rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 1.5),
        calc(var(--base-l) * 0.5),
        0.6
      ),
    0 0 6rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 1.5),
        calc(var(--base-l) * 0.5),
        1
      );
  --theme-shadow-input: 0 1px 2px
      hsla(
        var(--base-h),
        calc(var(--base-s) * 1.5),
        calc(var(--base-l) * 0.5),
        0.2
      ),
    0 3.4px 6.7px
      hsla(
        var(--base-h),
        calc(var(--base-s) * 1),
        calc(var(--base-l) * 0.5),
        0.15
      ),
    0 15px 30px
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.5),
        0.05
      );
  --theme-shadow-smallHigher: 0 0.0625rem 0.125rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.5),
        0.2
      ),
    0 0.25rem 0.5rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.5),
        0.15
      ),
    0 1rem 2rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.5),
        0.25
      );

  /*
  Gradient from contrast setting

  At 0 contrast, this sets both ends of the gradient to base color plus 50% white
  At 0.2 (default), it matches --theme-color-baseLightened60 and --theme-color-baseLightened40
  At 1, the top is white, bottom is base color
  */
  --theme-color-gradientTop: color-mix(
    in srgb,
    var(--theme-color-base),
    white calc(100% * (0.5 + 0.5 * var(--theme-value-gradientContrast)))
  );
  --theme-color-gradientBottom: color-mix(
    in srgb,
    var(--theme-color-base),
    white calc(100% * (0.5 - 0.5 * var(--theme-value-gradientContrast)))
  );
}
body.theme-light.theme-setting-customGradient {
  --theme-color-gradientTop: color-mix(
    in srgb,
    var(--theme-color-customGradientBaseTop),
    white calc(100% * (0.5 + 0.5 * var(--theme-value-gradientContrast)))
  );
  --theme-color-gradientBottom: color-mix(
    in srgb,
    var(--theme-color-customGradientBaseBottom),
    white calc(100% * (0.5 - 0.5 * var(--theme-value-gradientContrast)))
  );
}
.theme-light,
.theme-light .metadata-property:not([data-property-key="tags"]),
.theme-light .metadata-property[data-property-key="tags"] {
  --pill-background: var(--theme-color-baseTransparent75);
  --pill-background-hover: var(--theme-color-base);
  --pill-color: white;
  --pill-color-hover: white;
  --pill-color-remove: var(--theme-color-baseLightened80);
  --pill-color-remove-hover: var(--theme-color-baseLightened80);
  --pill-background-remove-hover: var(--theme-color-baseLightened25);
}
.theme-light.theme-setting-lightModeNoteBgNearWhite {
  --background-primary: color-mix(
    in srgb,
    var(--theme-color-base),
    white calc(100% * 0.97)
  );
}
/* #endregion */
/* #region   Dark mode */
.theme-dark,
.theme-dark .theme-light {
  /* Built-in variables */
  --background-modifier-active-hover-alt: var(--theme-color-baseDarkened25);
  --background-modifier-active-hover: var(--theme-color-baseDarkened70);
  --background-modifier-border-focus: var(--theme-color-baseDarkened25);
  --background-modifier-border: var(--theme-color-baseDarkened25);
  --background-modifier-hover: var(--theme-color-base);
  --blockquote-border-color: var(--theme-color-baseDarkened80);
  --collapse-icon-color: var(--theme-color-base);
  --collapse-icon-color-collapsed: var(--theme-color-base);
  --empty-pane-color: var(--theme-color-baseDarkened70);
  --icon-color-focused: var(--theme-color-baseLightened80);
  --icon-color-hover: hsl(
    var(--base-h),
    calc(var(--base-s) * 0.2),
    calc(var(--base-l) * 1.5)
  );
  --icon-color-hover: var(--theme-color-baseLightened80);
  --icon-color: var(--theme-color-base);
  --modal-background: var(--theme-color-baseDarkened80);
  --nav-collapse-icon-color-collapsed: var(--theme-color-baseTransparent75);
  --nav-collapse-icon-color: var(--theme-color-baseTransparent75);
  --nav-indentation-guide-color: var(--theme-color-baseTransparent25);
  --nav-item-background-active: var(--theme-color-base);
  --nav-item-background-selected: var(--theme-color-baseTransparent25);
  --nav-item-color-active: var(--theme-color-baseDarkened80);
  --nav-item-color: var(--theme-color-baseLightened60);
  --nav-item-color-hover: black;
  --search-icon-color: var(--theme-color-base);
  --shadow-l: 0 0.125rem 0.5rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.1),
        0.2
      ),
    0 0.875rem 1.7rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.1),
        0.15
      ),
    0 2rem 6rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.1),
        0.25
      );
  --shadow-s: 0 0.0625rem 0.125rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.1),
        0.1
      ),
    0 0.25rem 0.5rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.1),
        0.075
      ),
    0 1rem 2rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.1),
        0.125
      );
  --tag-color: hsl(
    var(--accent-h),
    calc(var(--accent-s) * 1.5),
    calc(var(--accent-l) * 1.2)
  );
  --tag-background: hsl(var(--accent-h), var(--accent-s), var(--accent-l), 0.2);
  --tab-background-active: var(--background-primary);
  --tab-background-inactive: var(--theme-color-baseDarkened85);
  --text-normal: var(--theme-color-baseLightened60);
  --text-faint: var(--theme-color-baseLightened25);
  --background-prompt: var(--theme-color-baseDarkened80);
  --interactive-accent: var(--theme-color-base);
  --table-border-color: var(--theme-color-baseDarkened70);
  --table-header-border-color: var(--theme-color-baseDarkened70);

  --metadata-property-background: var(--theme-color-baseDarkened80);
  --metadata-property-background-hover: var(--theme-color-baseDarkened80);
  --metadata-label-background-active: var(--theme-color-baseDarkened90);
  --metadata-input-background-active: var(--theme-color-baseDarkened90);

  /* Background for content area */
  /* This may be overridden below by the theme-value-darkModeNoteBg style setting. */
  --background-primary: color-mix(
    in srgb,
    var(--theme-color-base),
    black calc(100% * 0.95)
  );
  /* Background for controls area */
  --background-secondary: var(--theme-color-baseDarkened70);

  /* New variables for this theme */
  --theme-color-activeLineHighlight: var(--theme-color-baseTransparent12);
  --theme-color-audioRecordingActive: var(--theme-color-redLightened);
  --theme-color-blockId: var(--theme-color-baseDarkened25);
  --theme-color-calendarBg: var(--theme-color-baseDarkened80);
  --theme-color-calendarDayBg: var(--theme-color-darkenTransparent50);
  --theme-color-communityItemBg: var(--theme-color-baseDarkened80);
  --theme-color-communityItemBgActive: var(--theme-color-base);
  --theme-color-communityItemBgHover: var(--theme-color-baseDarkened70);
  --theme-color-communityItemBgSelected: var(--theme-color-baseDarkened25);
  --theme-color-contentItemBg: rgba(0, 0, 0, 0.2);
  --theme-color-contentItemBgActive: var(--theme-color-base);
  --theme-color-contentItemBgHover: rgba(0, 0, 0, 0.1);
  --theme-color-control: var(--theme-color-baseLightened60);
  --theme-color-controlActive: var(--theme-color-control);
  --theme-color-controlBg: var(--theme-color-baseDarkened25);
  --theme-color-controlBgHover: var(--theme-color-base);
  --theme-color-controlBgLowWeight: var(--theme-color-darkenTransparent25);
  --theme-color-controlContentArea: var(--theme-color-baseLightened60);
  --theme-color-controlContentAreaHover: var(--theme-color-baseDarkened80);
  --theme-color-controlUIHover: var(--theme-color-baseDarkened70);
  --theme-color-controlHover: var(--theme-color-baseDarkened90);
  --theme-color-controlSetBg: var(--theme-color-baseDarkened80);
  --theme-color-controlText: var(--theme-color-baseLightened60);
  --theme-color-controlTextHover: var(--theme-color-baseDarkened80);
  --theme-color-controlLightweightActive: var(--theme-color-baseLightened95);
  --theme-color-emptyStateBg: var(--theme-color-baseDarkened80);
  --theme-color-graphLine: white; /* Canvas doesn't support color-mix */
  --theme-color-hotkey: var(--theme-color-base);
  --theme-color-inputBorder: var(--theme-color-baseLightened25);
  --theme-color-inputPlaceholder: var(--theme-color-base);
  --theme-color-interactiveActive: var(--theme-color-baseDarkened25);
  --theme-color-kanbanLaneBg: var(--theme-color-baseDarkened80);
  --theme-color-log: var(--theme-color-baseLightened80);
  --theme-color-logBg: var(--theme-color-baseDarkened25);
  --theme-color-menuBg: var(--theme-color-baseDarkened80);
  --theme-color-mobileToolbarBg: var(--theme-color-baseDarkened80);
  --theme-color-modalContentBg: var(--theme-color-baseDarkened70);
  --theme-color-navFileTag: var(--theme-color-baseDarkened25);
  --theme-color-navFileTagActive: var(--nav-item-color-active);
  --theme-color-navFileTagActiveBorder: var(--nav-item-color-active);
  --theme-color-navFileTagBorder: var(--theme-color-baseDarkened25);
  --theme-color-navigationButtonBgHover: var(--theme-color-baseTransparent25);
  --theme-color-notice: var(--theme-color-baseDarkened90);
  --theme-color-noticeBg: var(--theme-color-baseLightened95);
  --theme-color-settingsBg: var(--theme-color-baseDarkened80);
  --theme-color-settingsBgStripe: var(--theme-color-baseDarkened90);
  --theme-color-settingsGroupBg: var(--theme-color-darkenTransparent50);
  --theme-color-suggestionBg: var(--theme-color-baseDarkened85);
  --theme-color-switcherBgActive: var(--theme-color-base);
  --theme-color-tabNavBg: var(--theme-color-baseDarkened70);
  --theme-color-tagBgSidebar: hsla(
    var(--accent-h),
    calc(var(--accent-s) * 1.5),
    calc(var(--accent-l) * 1),
    0.4
  );
  --theme-color-tagSidebar: hsl(
    var(--accent-h),
    calc(var(--accent-s) * 1.5),
    calc(var(--accent-l) * 1.3)
  );
  --theme-color-textMeta: var(--theme-color-base);
  --theme-color-textSelected: var(--theme-color-baseDarkened80);
  --theme-color-textTabInactive: var(--theme-color-baseLightened25);
  --theme-color-warningBg: var(--theme-color-baseLightened95);
  --theme-shadow-control: 0px 1px 2px
    hsla(
      var(--base-h),
      calc(var(--base-s) * 0.1),
      calc(var(--base-l) * 0.75),
      0.1
    );
  --theme-shadow-input: 0px 1px 2px
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.5),
        calc(var(--base-l) * 0.1),
        0.5
      ),
    0px 3.4px 6.7px
      hsla(
        var(--base-h),
        calc(var(--base-s) * 1),
        calc(var(--base-l) * 0.1),
        0.25
      ),
    0px 15px 30px
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.1),
        0.15
      );
  --theme-shadow-smallHigher: 0 0.0625rem 0.125rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.1),
        0.2
      ),
    0 0.25rem 0.5rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.1),
        0.15
      ),
    0 1rem 2rem
      hsla(
        var(--base-h),
        calc(var(--base-s) * 0.75),
        calc(var(--base-l) * 0.1),
        0.25
      );

  /*
  Gradient from contrast setting

  At 0 contrast, this sets both ends of the gradient to base color plus 70% black
  At 0.2 (default), it matches --theme-color-baseDarkened70 and --theme-color-baseDarkened80
  At 1, the top is base color, bottom pure black
  */
  --theme-color-gradientTop: color-mix(
    in srgb,
    var(--theme-color-base),
    black calc(100% * (0.7 - 0.5 * var(--theme-value-gradientContrast)))
  );
  --theme-color-gradientBottom: color-mix(
    in srgb,
    var(--theme-color-base),
    black calc(100% * (0.7 + 0.5 * var(--theme-value-gradientContrast)))
  );
}
body.theme-dark.theme-setting-customGradient {
  --theme-color-gradientTop: color-mix(
    in srgb,
    var(--theme-color-customGradientBaseTop),
    black calc(100% * (0.7 - 0.5 * var(--theme-value-gradientContrast)))
  );
  --theme-color-gradientBottom: color-mix(
    in srgb,
    var(--theme-color-customGradientBaseBottom),
    black calc(100% * (0.7 + 0.5 * var(--theme-value-gradientContrast)))
  );
}
.theme-dark,
.theme-dark .metadata-property:not([data-property-key="tags"]),
.theme-dark .metadata-property[data-property-key="tags"] {
  --pill-background: var(--theme-color-baseTransparent75);
  --pill-background-hover: var(--theme-color-base);
  --pill-color: black;
  --pill-color-hover: black;
  --pill-color-remove: var(--theme-color-baseDarkened80);
  --pill-color-remove-hover: var(--theme-color-baseDarkened80);
  --pill-background-remove-hover: var(--theme-color-baseDarkened25);
}
.theme-dark.theme-value-darkModeNoteBgFullBlack {
  /* Override note background when specified by style settings. */
  /* There's no equivalent of this for light mode. */
  --background-primary: black;
}
/* #endregion */
/* #endregion */
/* #region Keyframe animations */
@keyframes fadein {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}
/* #endregion */

/* #region Typography */
/* #region   Reading and Live Preview modes */

body {
  --theme-value-headingScaleFactor: 1.2;
  --blockquote-border-thickness: 0.25em;
  /* Use the system font by default for both text and interface, unless user has chosen something else.  */
  --font-default: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif,
    "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  --font-monospace-default: ui-monospace, Menlo, SFMono-Regular, Consolas,
    "Roboto Mono", "Source Code Pro", monospace;
  --font-text-theme: var(--font-default);
  --font-interface-theme: var(--font-default);
  --font-monospace-theme: var(--font-monospace-default);
  --h1-size: calc(var(--theme-value-headingScaleFactor) * var(--h2-size));
  --h2-size: calc(var(--theme-value-headingScaleFactor) * var(--h3-size));
  --h3-size: calc(var(--theme-value-headingScaleFactor) * var(--h4-size));
  --h4-size: calc(var(--theme-value-headingScaleFactor) * var(--h5-size));
  --h5-size: calc(var(--theme-value-headingScaleFactor) * var(--h6-size));
  --h6-size: var(--font-text-size);
  /* Heading weights increase inversely with size, to maintain distinction from body text */
  --h1-weight: 100;
  --h2-weight: 200;
  --h3-weight: 300;
  --h4-weight: 400;
  --h5-weight: 500;
  --h6-weight: 500;
  /* Inline title isn't huge, but has Greater weight */
  --inline-title-size: var(--h3-size);
  --inline-title-weight: var(--h4-weight);
  --inline-title-line-height: var(--line-height-normal);
  --inline-title-style: normal;
  --inline-title-variant: normal;
  --inline-title-font: inherit;
  --inline-title-color: inherit;

  --line-height-normal: 1.6;
  --link-decoration-thickness: 1px;
  --link-unresolved-decoration-style: dashed;
  --h1-line-height: var(--line-height-normal);
  --h2-line-height: var(--line-height-normal);
  --h3-line-height: var(--line-height-normal);
  --h4-line-height: var(--line-height-normal);
  --h5-line-height: var(--line-height-normal);
  --h6-line-height: var(--line-height-normal);

  /* Hanging punctuation isn't supported in Electron yet (Dec 2023), but here for when it is. */
  hanging-punctuation: first allow-end last;
}
.theme-setting-headingScaleFactor1point067 {
  --theme-value-headingScaleFactor: 1.067;
}
.theme-setting-headingScaleFactor1point125 {
  --theme-value-headingScaleFactor: 1.125;
}
.theme-setting-headingScaleFactor1point2 {
  --theme-value-headingScaleFactor: 1.2;
}
.theme-setting-headingScaleFactor1point25 {
  --theme-value-headingScaleFactor: 1.25;
}
.theme-setting-headingScaleFactor1point333 {
  --theme-value-headingScaleFactor: 1.333;
}
.theme-setting-headingScaleFactor1point414 {
  --theme-value-headingScaleFactor: 1.414;
}
.theme-setting-headingScaleFactor1point5 {
  --theme-value-headingScaleFactor: 1.5;
}
.theme-setting-headingScaleFactor1point618 {
  --theme-value-headingScaleFactor: 1.618;
}
/* More compact typography to fit more on small screens */
.is-phone {
  --theme-value-headingScaleFactorPhone: 1.2;
  --h1-size: calc(var(--theme-value-headingScaleFactorPhone) * var(--h2-size));
  --h2-size: calc(var(--theme-value-headingScaleFactorPhone) * var(--h3-size));
  --h3-size: calc(var(--theme-value-headingScaleFactorPhone) * var(--h4-size));
  --h4-size: calc(var(--theme-value-headingScaleFactorPhone) * var(--h5-size));
  --h5-size: calc(var(--theme-value-headingScaleFactorPhone) * var(--h6-size));
  --line-height-normal: 1.5;
}
.is-phone.theme-setting-headingScaleFactorPhone1point067 {
  --theme-value-headingScaleFactorPhone: 1.067;
}
.is-phone.theme-setting-headingScaleFactorPhone1point125 {
  --theme-value-headingScaleFactorPhone: 1.125;
}
.is-phone.theme-setting-headingScaleFactorPhone1point2 {
  --theme-value-headingScaleFactorPhone: 1.2;
}
.is-phone.theme-setting-headingScaleFactorPhone1point25 {
  --theme-value-headingScaleFactorPhone: 1.25;
}
.is-phone.theme-setting-headingScaleFactorPhone1point333 {
  --theme-value-headingScaleFactorPhone: 1.333;
}
.is-phone.theme-setting-headingScaleFactorPhone1point414 {
  --theme-value-headingScaleFactorPhone: 1.414;
}
.is-phone.theme-setting-headingScaleFactorPhone1point5 {
  --theme-value-headingScaleFactorPhone: 1.5;
}
.is-phone.theme-setting-headingScaleFactorPhone1point618 {
  --theme-value-headingScaleFactorPhone: 1.618;
}
/* Smaller font size for markdown documents in sidebar */
.mod-sidedock {
  --h1-size: calc(var(--theme-value-headingScaleFactor) * var(--h2-size));
  --h2-size: calc(var(--theme-value-headingScaleFactor) * var(--h3-size));
  --h3-size: calc(var(--theme-value-headingScaleFactor) * var(--h4-size));
  --h4-size: calc(var(--theme-value-headingScaleFactor) * var(--h5-size));
  --h5-size: calc(var(--theme-value-headingScaleFactor) * var(--h6-size));
  --h6-size: calc(
    var(--theme-value-sidebarFontScalingFactor) * var(--font-text-size)
  );
}

.markdown-rendered
  div:has(> :is(p, pre, table, ul, ol))
  + div
  > :is(h1, h2, h3, h4, h5, h6) {
  margin-top: 0;
}

/* Space before headings... */
.markdown-source-view .cm-line.HyperMD-header,
.markdown-source-view.is-live-preview .cm-line.HyperMD-header,
.markdown-rendered h1,
.markdown-rendered h2,
.markdown-rendered h3,
.markdown-rendered h4,
.markdown-rendered h5,
.markdown-rendered h6 {
  padding: var(--heading-spacing) 0 0 0;
  margin: 0;
}
/* ...except when they immediately follow another heading */
.markdown-source-view
  :is(
    .cm-line.HyperMD-header-1,
    .cm-line.HyperMD-header-2,
    .cm-line.HyperMD-header-3,
    .cm-line.HyperMD-header-4,
    .cm-line.HyperMD-header-5,
    .cm-line.HyperMD-header-6
  )
  + :is(
    .cm-line.HyperMD-header-1,
    .cm-line.HyperMD-header-2,
    .cm-line.HyperMD-header-3,
    .cm-line.HyperMD-header-4,
    .cm-line.HyperMD-header-5,
    .cm-line.HyperMD-header-6
  ) {
  /* Using padding as margin has an !important applied elsewhere */
  padding-top: 0;
}
.markdown-rendered
  :is(
    .markdown-preview-section > div:has(h1),
    .markdown-preview-section > div:has(h2),
    .markdown-preview-section > div:has(h3),
    .markdown-preview-section > div:has(h4),
    .markdown-preview-section > div:has(h5),
    .markdown-preview-section > div:has(h6)
  )
  + :is(
    .markdown-preview-section > div:has(h1),
    .markdown-preview-section > div:has(h2),
    .markdown-preview-section > div:has(h3),
    .markdown-preview-section > div:has(h4),
    .markdown-preview-section > div:has(h5),
    .markdown-preview-section > div:has(h6)
  )
  :is(h1, h2, h3, h4, h5, h6) {
  padding-top: 0;
}
/* ...or they're first on the page */
.markdown-source-view .cm-line.HyperMD-header:first-child,
.markdown-rendered .mod-header + div > h1 {
  padding-top: 0;
}

/* Markdown formatting shown while editing e.g. ### for headings */
.cm-formatting.cm-formatting-header {
  color: var(--theme-color-textMeta);
  font-size: var(--font-ui-smaller) !important;
  font-weight: normal;
  vertical-align: middle;
}

.markdown-source-view .HyperMD-quote,
.callout {
  font-weight: 300;
}

.markdown-source-view.mod-cm6 .cm-line.HyperMD-codeblock {
  /* Matched to --callout-padding */
  padding: 0 1.5em;
}

.markdown-source-view.mod-cm6 hr,
.markdown-rendered hr {
  display: flex;
  align-items: center;
  border: none;
  border-top: var(--hr-thickness) solid;
  border-color: var(--hr-color);
  margin: 2em 0 !important;
}

/* #region     Lists */
li.is-collapsed .list-bullet:after,
.is-collapsed ~ .cm-formatting-list .list-bullet:after {
  box-shadow: none;
}
@media (hover: hover) {
  li.is-collapsed .list-collapse-indicator:hover ~ .list-bullet:after,
  li.is-collapsed .cm-fold-indicator:hover ~ .list-bullet:after,
  .list-collapse-indicator:hover.is-collapsed ~ .list-bullet:after,
  .cm-fold-indicator:hover.is-collapsed ~ .list-bullet:after,
  li.is-collapsed
    .list-collapse-indicator:hover
    ~ .cm-formatting-list
    .list-bullet:after,
  li.is-collapsed
    .cm-fold-indicator:hover
    ~ .cm-formatting-list
    .list-bullet:after,
  .list-collapse-indicator:hover.is-collapsed
    ~ .cm-formatting-list
    .list-bullet:after,
  .cm-fold-indicator:hover.is-collapsed
    ~ .cm-formatting-list
    .list-bullet:after {
    background-color: var(--list-marker-color-collapsed);
    box-shadow: none;
  }

  .list-collapse-indicator:hover ~ .list-bullet:after,
  .cm-fold-indicator:hover ~ .list-bullet:after,
  .list-collapse-indicator:hover ~ .cm-formatting-list .list-bullet:after,
  .cm-fold-indicator:hover ~ .cm-formatting-list .list-bullet:after {
    box-shadow: none;
  }
}
/* #endregion */
/* #region     Collapse indicators */
/* Appearance consistent with navigation controls */
.collapse-indicator,
.list-collapse-indicator {
  background-color: transparent;
  border-radius: 100%;
  display: flex;
  justify-content: center;
  align-content: center;
  width: var(--theme-length-collapseIndicatorSize);
  height: var(--theme-length-collapseIndicatorSize);
  border: none;
  color: var(--theme-color-control);
  flex-wrap: wrap;
}
@media (hover: hover) {
  .collapse-indicator:hover,
  .cm-fold-indicator:hover .collapse-indicator,
  .list-collapse-indicator:hover {
    color: var(--theme-color-control);
    background-color: var(--theme-color-navigationButtonBgHover);
  }
}
.markdown-source-view.mod-cm6 .cm-fold-indicator .collapse-indicator {
  height: var(--theme-length-collapseIndicatorSize);
  top: 50%;
  margin-top: calc(-0.5 * var(--theme-length-collapseIndicatorSize));
  padding: 0;
}
.markdown-source-view.mod-cm6.is-live-preview
  .cm-line.HyperMD-list-line:not(.cm-active):not(.HyperMD-task-line)
  .cm-fold-indicator
  .collapse-indicator {
  margin-right: 1.75rem;
  padding-right: 0;
  transform: translateX(1.75rem);
}
.markdown-preview-view h2 {
  position: relative;
}
.markdown-preview-view .heading-collapse-indicator {
  top: calc(var(--heading-spacing) + 0.5em * var(--h2-line-height));
  margin-top: calc(-0.5 * var(--theme-length-collapseIndicatorSize));
  margin-left: -2rem;
}
.markdown-rendered .list-collapse-indicator {
  padding-inline-end: 0;
}
/* #endregion */
/* #region     Links */
.markdown-source-view.is-live-preview .is-unresolved .cm-link,
.markdown-reading-view h1 a {
  --text-decoration-color: var(--link-color);
  --text-decoration-style: dashed;
}
.markdown-source-view .cm-link .cm-underline,
.markdown-source-view .cm-hmd-internal-link .cm-underline,
.markdown-reading-view h1 a,
.markdown-reading-view h2 a,
.markdown-reading-view h3 a,
.markdown-reading-view h4 a,
.markdown-reading-view h5 a,
.markdown-reading-view h6 a {
  text-underline-offset: 0.125em;
}
@media (hover: hover) {
  .markdown-source-view.is-live-preview span.cm-link:hover,
  .markdown-source-view.is-live-preview
    span.cm-hmd-internal-link:hover:has(.cm-underline) {
    /* Don't add double underline */
    text-decoration: none;
  }
}
.markdown-source-view.is-live-preview .cm-line.HyperMD-header-1 .cm-link,
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-1
  .cm-hmd-internal-link,
.markdown-reading-view h1 a {
  --link-decoration-thickness: max(calc(var(--h1-weight) / 400 * 1px), 1px);
}
.markdown-source-view.is-live-preview .cm-line.HyperMD-header-2 .cm-link,
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-2
  .cm-hmd-internal-link,
.markdown-reading-view h2 a {
  --link-decoration-thickness: max(calc(var(--h2-weight) / 400 * 1px), 1px);
}
.markdown-source-view.is-live-preview .cm-line.HyperMD-header-3 .cm-link,
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-3
  .cm-hmd-internal-link,
.markdown-reading-view h3 a {
  --link-decoration-thickness: max(calc(var(--h3-weight) / 400 * 1px), 1px);
}
.markdown-source-view.is-live-preview .cm-line.HyperMD-header-4 .cm-link,
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-4
  .cm-hmd-internal-link,
.markdown-reading-view h4 a {
  --link-decoration-thickness: max(calc(var(--h4-weight) / 400 * 1px), 1px);
}
.markdown-source-view.is-live-preview .cm-line.HyperMD-header-5 .cm-link,
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-5
  .cm-hmd-internal-link,
.markdown-reading-view h5 a {
  --link-decoration-thickness: max(calc(var(--h5-weight) / 400 * 1px), 1px);
}
.markdown-source-view.is-live-preview .cm-line.HyperMD-header-6 .cm-link,
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-6
  .cm-hmd-internal-link,
.markdown-reading-view h6 a {
  --link-decoration-thickness: max(calc(var(--h6-weight) / 400 * 1px), 1px);
}
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-1
  .is-unresolved
  .cm-link,
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-1
  .cm-hmd-internal-link
  .is-unresolved,
.markdown-reading-view h1 a.is-unresolved {
  --link-decoration-thickness: max(calc(var(--h1-weight) / 200 * 2px), 1px);
}
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-2
  .is-unresolved
  .cm-link,
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-2
  .cm-hmd-internal-link
  .is-unresolved,
.markdown-reading-view h2 a.is-unresolved {
  --link-decoration-thickness: max(calc(var(--h2-weight) / 400 * 2px), 1px);
}
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-3
  .is-unresolved
  .cm-link,
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-3
  .cm-hmd-internal-link
  .is-unresolved,
.markdown-reading-view h3 a.is-unresolved {
  --link-decoration-thickness: max(calc(var(--h3-weight) / 400 * 2px), 1px);
}
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-4
  .is-unresolved
  .cm-link,
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-4
  .cm-hmd-internal-link
  .is-unresolved,
.markdown-reading-view h4 a.is-unresolved {
  --link-decoration-thickness: max(calc(var(--h4-weight) / 400 * 2px), 1px);
}
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-5
  .is-unresolved
  .cm-link,
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-5
  .cm-hmd-internal-link
  .is-unresolved,
.markdown-reading-view h5 a.is-unresolved {
  --link-decoration-thickness: max(calc(var(--h5-weight) / 400 * 2px), 1px);
}
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-6
  .is-unresolved
  .cm-link,
.markdown-source-view.is-live-preview
  .cm-line.HyperMD-header-6
  .cm-hmd-internal-link
  .is-unresolved,
.markdown-reading-view h6 a.is-unresolved {
  --link-decoration-thickness: max(calc(var(--h6-weight) / 400 * 2px), 1px);
}
/* #endregion */
/* #region     Tables */

.markdown-rendered th,
.markdown-rendered table:not(.calendar) thead tr > th:nth-child(2n + 2) {
  background: var(--theme-color-tableHeaderBg);
}
.is-mobile
  .cm-table-widget
  .markdown-rendered
  table:not(.calendar)
  thead
  tr
  > th:last-child {
  /* Make room for the edit button to not overlap. */
  padding-right: 2em;
}
.is-mobile .markdown-source-view .cm-table-widget .edit-block-button {
  top: 0;
  right: 0;
}
/* #endregion */
/* #region     Embeds */
/* Default appearance for embeds */
/* I'm treating images as a special case, because they don't have any controls and a colored surround would often be distracting. */
.internal-embed:not(.image-embed),
.internal-query {
  background-color: var(--embed-background);
  border-bottom: var(--embed-border-bottom);
  border-left: var(--embed-border-left);
  border-radius: 0.5rem;
  border-right: var(--embed-border-right);
  border-top: var(--embed-border-top);
  margin: 0;
}
.markdown-embed .embed-title {
  font-size: var(--font-ui-small);
  font-weight: var(--nav-item-weight-hover);
  color: var(--background-modifier-hover);
  margin: 0 2rem 0 0;
  align-items: center;
  display: none;
}
.theme-setting-embeddedNoteTitleVisibilityHide .embed-title {
  display: none;
}
.theme-setting-embeddedNoteTitleVisibilityShow
  .internal-embed:has(.embed-title:not(:empty)) {
  padding-top: 0.5rem;
}
.theme-setting-embeddedNoteTitleVisibilityShow .embed-title {
  display: flex;
}
@media (hover: hover) {
  .theme-setting-embeddedNoteTitleVisibilityHover
    .internal-embed:has(.embed-title:not(:empty)) {
    padding-top: 1.5rem;
  }
  .theme-setting-embeddedNoteTitleVisibilityHover
    .internal-embed:has(.embed-title:not(:empty)):hover
    .embed-title {
    display: flex;
    position: absolute;
    top: 0.5rem;
    left: 1rem;
  }
}
.markdown-embed .markdown-embed-content {
  height: fit-content;
  max-height: var(--embed-max-height);
  overflow: auto;
}
.markdown-source-view.mod-cm6
  .cm-content
  > .markdown-embed[contenteditable="false"]:has(.markdown-embed-link) {
  contain: layout !important;
}
.markdown-embed-link {
  position: absolute;
  top: 0;
  right: auto;
  left: calc(100% + 0.25em);
}
.file-embed-link {
  position: absolute;
  top: 0;
  right: 0;
}
/* Audio embed */
.markdown-source-view.mod-cm6 .cm-content > .media-embed:has(> audio) {
  display: flex;
}
audio::-webkit-media-controls-enclosure {
  border: none;
  background: transparent;
  padding: 0;
  border-radius: 0;
  max-height: none;
  line-height: 0;
}
audio::-webkit-media-controls-panel {
  background: transparent;
  border: none;
  padding: 0.25rem;
  border-radius: 0.5rem;
}

/* Markdown embed e.g. embedded note */
.markdown-embed {
  padding: var(--embed-padding);
}
.markdown-embed .markdown-rendered .mod-header {
  margin-bottom: 0;
}

/* PDF embed */
.pdf-toolbar {
  background-color: transparent;
  border-bottom: none;
  padding: 0.25em 2.25em 0.25em 0.25em;
}
.pdf-container {
  background-color: var(--pdf-background);
  margin: 0 0.25em 0.25em 0.25em;
  border-bottom-left-radius: 0.3em;
  border-bottom-right-radius: 0.3em;
}
.markdown-source-view.mod-cm6 .pdf-embed .edit-block-button {
  background: transparent;
  top: 0.25em;
}

/* Query embed */
.internal-query .search-result-container {
  padding: 0 1em 1em 1em;
  max-height: 800px;
  overflow: auto;
  border: none;
  background-color: var(--background-secondary);
  background-color: transparent;
  border-radius: 0;
}
.internal-query .internal-query-header {
  padding: 0.5em 0 0.5em 1em;
  color: var(--text-normal);
  display: flex;
  justify-content: flex-start;
  align-items: center;
}
@media (hover: hover) {
  .markdown-source-view.mod-cm6
    .cm-embed-block:not(.cm-table-widget):has(> .internal-query):hover {
    box-shadow: none;
  }
}

/* Iframe embed */
.markdown-source-view iframe,
.markdown-reading-view iframe {
  background-color: var(--embed-background);
  border-bottom: var(--embed-border-bottom);
  border-left: var(--embed-border-left);
  border-radius: 0.5em;
  border-right: var(--embed-border-right);
  border-top: var(--embed-border-top);
  height: 20em;
  width: 100%;
}
/* #endregion */
/* #region     Blocks and Callouts */
.callout.is-collapsible .callout-title {
  cursor: pointer;
}

@media (hover: hover) {
  .callout.is-collapsible .callout-title:hover {
    text-decoration: underline;
  }
}

.markdown-source-view.mod-cm6 .edit-block-button,
.markdown-source-view .code-block-flair {
  top: 0.25em;
  right: 0.25em;
}
.markdown-source-view.mod-cm6 .code-block-flair {
  width: auto;
  min-width: 2em;
  text-wrap: nowrap;
}
body:not(.is-mobile) {
  .cm-content .cm-embed-block[contenteditable="false"]:has(.edit-block-button) {
    contain: layout !important;
  }
  /* Move edit controls to the sidebar outside the block */
  .cm-content .cm-embed-block .edit-block-button,
  .markdown-source-view.mod-cm6 .code-block-flair {
    top: 0;
    right: auto;
    left: calc(100% + 0.25em);
  }
}

.markdown-source-view.is-live-preview span.cm-blockid {
  background: transparent;
  border-radius: 0.25em;
  border: solid 1px var(--theme-color-blockId);
  color: var(--theme-color-blockId);
  line-height: 1.25em;
  padding: 0 0.25em;
  margin-top: 0;
  vertical-align: baseline;
}
/* #endregion */

/********** Diagrams **********/
.mermaid {
  --theme-color-mermaidBorder: black;
  text-align: center;
}
.mermaid svg[aria-roledescription="pie"] .pieCircle,
.mermaid svg[aria-roledescription="pie"] .legend rect {
  stroke: var(--theme-color-mermaidBorder) !important;
}
.mermaid svg[aria-roledescription="pie"] .pieCircle:nth-of-type(1),
.mermaid svg[aria-roledescription="pie"] .legend:nth-of-type(1) rect {
  fill: var(--color-red) !important;
}
.mermaid svg[aria-roledescription="pie"] .pieCircle:nth-of-type(2),
.mermaid svg[aria-roledescription="pie"] .legend:nth-of-type(2) rect {
  fill: var(--color-cyan) !important;
}
.mermaid svg[aria-roledescription="pie"] .pieCircle:nth-of-type(3),
.mermaid svg[aria-roledescription="pie"] .legend:nth-of-type(3) rect {
  fill: var(--color-orange) !important;
}
.mermaid svg[aria-roledescription="pie"] .pieCircle:nth-of-type(4),
.mermaid svg[aria-roledescription="pie"] .legend:nth-of-type(4) rect {
  fill: var(--color-blue) !important;
}
.mermaid svg[aria-roledescription="pie"] .pieCircle:nth-of-type(5),
.mermaid svg[aria-roledescription="pie"] .legend:nth-of-type(5) rect {
  fill: var(--color-yellow) !important;
}
.mermaid svg[aria-roledescription="pie"] .pieCircle:nth-of-type(6),
.mermaid svg[aria-roledescription="pie"] .legend:nth-of-type(6) rect {
  fill: var(--color-purple) !important;
}
.mermaid svg[aria-roledescription="pie"] .pieCircle:nth-of-type(7),
.mermaid svg[aria-roledescription="pie"] .legend:nth-of-type(7) rect {
  fill: var(--color-green) !important;
}
.mermaid svg[aria-roledescription="pie"] .pieCircle:nth-of-type(8),
.mermaid svg[aria-roledescription="pie"] .legend:nth-of-type(8) rect {
  fill: var(--color-pink) !important;
}
/* #endregion */
/* #region   Source and Live Preview modes */
.markdown-source-view.mod-cm6 {
  .cm-gutters {
    color: var(--theme-color-textMeta) !important;
  }
}
body.theme-setting-highlightActiveLine {
  .markdown-source-view.mod-cm6 {
    .cm-active:not(.HyperMD-codeblock) {
      background-color: var(--theme-color-activeLineHighlight);
      border-radius: 0.125em;
    }
  }
}
/* #endregion */
/* #region   Source mode */
.markdown-source-view:not(.is-live-preview) .cm-scroller {
  font-family: var(--font-monospace);
}
/* #endregion */
/* #endregion */
/* #region Markdown Checkboxes */

/* Alternate checkboxes idea borrowed from Minimal theme */
.markdown-source-view.mod-cm6 .task-list-item-checkbox {
  border-radius: 0.33em;
  border-color: var(--theme-color-controlContentArea);
  /* Needs room at left for collapse indicator */
  margin-inline-start: 1em;
  margin-inline-end: 0.25em;
}
@media (hover: hover) {
  .markdown-source-view.mod-cm6 .task-list-item-checkbox:hover {
    border-color: var(--theme-color-controlContentArea);
    background-color: var(--theme-color-controlContentAreaHover);
  }
}
/* Alternate incomplete states */
input.task-list-item-checkbox[data-task="/"]:checked,
input.task-list-item-checkbox[data-task="<"]:checked,
input.task-list-item-checkbox[data-task="!"]:checked,
input.task-list-item-checkbox[data-task="?"]:checked,
li[data-task="/"] > input:checked,
li[data-task="<"] > input:checked,
li[data-task="!"] > input:checked,
li[data-task="?"] > input:checked,
li[data-task="/"] > p > input:checked,
li[data-task="<"] > p > input:checked,
li[data-task="!"] > p > input:checked,
li[data-task="?"] > p > input:checked {
  background-image: none;
  background-color: transparent;
  position: relative;
  overflow: hidden;
}
input[data-task="/"]:checked:after,
input[data-task="<"]:checked:after,
input[data-task="!"]:checked:after,
input[data-task="?"]:checked:after,
li[data-task="/"] > input:checked:after,
li[data-task="<"] > input:checked:after,
li[data-task="!"] > input:checked:after,
li[data-task="?"] > input:checked:after,
li[data-task="/"] > p > input:checked:after,
li[data-task="<"] > p > input:checked:after,
li[data-task="!"] > p > input:checked:after,
li[data-task="?"] > p > input:checked:after {
  content: "";
  top: -1px;
  left: -1px;
  position: absolute;
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  display: block;
  background-color: var(--theme-color-controlContentArea);
  -webkit-mask-position: 50% 50%;
  -webkit-mask-size: 100%;
  -webkit-mask-repeat: no-repeat;
}
input[data-task="/"]:checked:after,
li[data-task="/"] > input:checked:after,
li[data-task="/"] > p > input:checked:after {
  -webkit-mask-image: url('data:image/svg+xml; utf8, <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill="%23000000"><polyline points="12,-12 48,-12 48,36 12,36" transform="rotate(45) translate(5,-12)"></polyline></g></g></svg>');
}
input[data-task="<"]:checked:after,
li[data-task="<"] > input:checked:after,
li[data-task="<"] > p > input:checked:after {
  -webkit-mask-image: url('data:image/svg+xml; utf8, <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill="%23000000"><polyline points="15,4.5 6,12 15,19.5 16.75,17.5 10,12 16.75,6.5"></polyline></g></g></svg>');
}
input[data-task="!"]:checked:after,
li[data-task="!"] > input:checked:after,
li[data-task="!"] > p > input:checked:after {
  -webkit-mask-image: url('data:image/svg+xml; utf8, <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" x2="12" y1="5" y2="13"/><line x1="12" x2="12" y1="19" y2="19"/></svg>');
}
input[data-task="?"]:checked:after,
li[data-task="?"] > input:checked:after,
li[data-task="?"] > p > input:checked:after {
  -webkit-mask-image: url('data:image/svg+xml; utf8, <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7.5,6.852c0.463,-1.049 1.493,-2.872 4.5,-2.852c3.957,0.026 5.001,2.617 5,4.5c-0.002,2.952 -4.963,3.463 -5,7.5"/><path d="M12.25,20l-0.443,-0"/></svg>');
}

/* Complete states */
.markdown-source-view.mod-cm6 .HyperMD-task-line[data-task="x"],
.markdown-source-view.mod-cm6 .HyperMD-task-line[data-task="-"],
.markdown-source-view.mod-cm6 .HyperMD-task-line[data-task=">"] {
  text-decoration: var(--checklist-done-decoration);
  color: var(--checklist-done-color);
}
input[data-task="x"]:checked,
li[data-task="x"] > input:checked,
li[data-task="x"] > p > input:checked,
input[data-task="X"]:checked,
li[data-task="X"] > input:checked,
li[data-task="X"] > p > input:checked,
input.task-list-item-checkbox[data-task=">"]:checked,
li[data-task=">"] > input:checked,
li[data-task=">"] > p > input:checked,
input.task-list-item-checkbox[data-task="-"]:checked,
li[data-task="-"] > input:checked,
li[data-task="-"] > p > input:checked {
  background-image: none;
  border-color: var(--theme-color-controlContentArea);
  position: relative;
  overflow: hidden;
  background-color: var(--theme-color-controlContentArea);
  color: white;
}
input[data-task="x"]:checked:after,
li[data-task="x"] > input:checked:after,
li[data-task="x"] > p > input:checked:after,
input[data-task="x"]:checked:after,
li[data-task="x"] > input:checked:after,
li[data-task="x"] > p > input:checked:after,
input[data-task="-"]:checked:after,
li[data-task="-"] > input:checked:after,
li[data-task="-"] > p > input:checked:after,
input[data-task=">"]:checked:after,
li[data-task=">"] > input:checked:after,
li[data-task=">"] > p > input:checked:after {
  content: "";
  top: -1px;
  left: -1px;
  position: absolute;
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  display: block;
  background-color: var(--checkbox-marker-color);
  -webkit-mask-repeat: no-repeat;
}
input[data-task="x"]:checked:after,
li[data-task="x"] > input:checked:after,
li[data-task="x"] > p > input:checked:after {
  -webkit-mask-position: 52% 52%;
  -webkit-mask-size: 65%;
  -webkit-mask-image: url('data:image/svg+xml; utf8, <svg width="12px" height="10px" viewBox="0 0 12 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-4.000000, -6.000000)" fill="%23000000"><path d="M8.1043257,14.0367999 L4.52468714,10.5420499 C4.32525014,10.3497722 4.32525014,10.0368095 4.52468714,9.8424863 L5.24777413,9.1439454 C5.44721114,8.95166768 5.77142411,8.95166768 5.97086112,9.1439454 L8.46638057,11.5903727 L14.0291389,6.1442083 C14.2285759,5.95193057 14.5527889,5.95193057 14.7522259,6.1442083 L15.4753129,6.84377194 C15.6747499,7.03604967 15.6747499,7.35003511 15.4753129,7.54129009 L8.82741268,14.0367999 C8.62797568,14.2290777 8.3037627,14.2290777 8.1043257,14.0367999"></path></g></g></svg>');
}
input[data-task="-"]:checked:after,
li[data-task="-"] > input:checked:after,
li[data-task="-"] > p > input:checked:after {
  -webkit-mask-position: 50% 50%;
  -webkit-mask-size: 100%;
  -webkit-mask-image: url('data:image/svg+xml; utf8, <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill="%23000000"><polyline points="4,10.5 20,10.5 20,13.5 4,13.5"></polyline></g></g></svg>');
}
input[data-task=">"]:checked:after,
li[data-task=">"] > input:checked:after,
li[data-task=">"] > p > input:checked:after {
  -webkit-mask-position: 50% 50%;
  -webkit-mask-size: 100%;
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-image: url('data:image/svg+xml; utf8, <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill="%23000000"><polyline points="9,4.5 18,12 9,19.5 7.25,17.5 14,12 7.25,6.5"></polyline></g></g></svg>');
}

/* #endregion */

/* #region Mobile */

.is-mobile {
  --file-margins: 0;
  --mobile-sidebar-background: transparent;
  --view-header-height: auto;
}
.is-phone {
  /* I'm pretty sure this isn't used on mobile */
  --divider-width: 0;
  --metadata-divider-width: 0;
}

/* Mobile workspace */
.is-mobile .workspace > .mod-root {
  padding: 0 var(--theme-spacing-mobileHorizontalSpacing) 0.5rem
    var(--theme-spacing-mobileHorizontalSpacing);
}
.is-mobile .workspace-split.mod-root .workspace-tabs {
  padding: 0;
}
.is-mobile .view-actions {
  padding: 0;
}
.is-mobile .view-header-title-container {
  height: auto;
  padding-left: 0;
}
.is-phone .workspace .mod-root .workspace-tabs .workspace-tab-container {
  background: transparent;
  border-radius: 0;
}
.is-phone
  .workspace-fake-target-overlay:not(.is-in-sidebar)
  .workspace-tabs
  .workspace-leaf,
.is-phone .mod-root .workspace-tabs .workspace-leaf {
  background: transparent;
}
.is-phone .workspace-leaf.mod-active .view-header {
  background: transparent;
}
.is-phone .view-header {
  padding: 0;
  column-gap: 1rem;
  row-gap: 0;
  border-bottom: none;
  flex-wrap: wrap;
  background: transparent;
}
.is-phone .view-header-title-container {
  background-color: var(--background-primary);
  border-top-left-radius: calc(
    var(--tab-radius) * min(var(--theme-setting-mobileHorizontalPadding), 0.5) /
      0.5
  );
  border-top-right-radius: calc(
    var(--tab-radius) * min(var(--theme-setting-mobileHorizontalPadding), 0.5) /
      0.5
  );
  order: 1;
  width: 100%;
  flex-shrink: 0;
  padding: 0.5em;
}
.is-phone .workspace-split.mod-root .view-content {
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  border-bottom-left-radius: calc(
    var(--tab-radius) * min(var(--theme-setting-mobileHorizontalPadding), 0.5) /
      0.5
  );
  border-bottom-right-radius: calc(
    var(--tab-radius) * min(var(--theme-setting-mobileHorizontalPadding), 0.5) /
      0.5
  );
}
.is-phone .workspace-split.mod-root .workspace-tabs .workspace-tab-container {
  box-shadow: none;
  /* Bottom margin the same as height of .mobile-navbar, to avoid overlap */
  margin-bottom: calc(
    max(var(--size-4-2), var(--safe-area-inset-bottom)) + var(--size-4-2) +
      var(--size-2-2) * 4 + var(--icon-size)
  );
}
.is-phone.mod-toolbar-open .mod-root .workspace-tabs .workspace-tab-container {
  /* ...except when the toolbar is open. Using this as a proxy for detecting that the on-screen keyboard is present. */
  margin-bottom: 0;
}
.mobile-navbar {
  background-color: transparent;
}

/* #region   Drawers */
.workspace-drawer {
  background: none;
  bottom: 0.5rem;
  padding-bottom: var(--safe-area-inset-bottom);
  padding-top: var(--safe-area-inset-top);
  top: 0.5rem;

  &.theme-dark {
    /* Override weirdness in app theme */
    background: none;
  }
}
.workspace-drawer-inner {
  background-color: var(--background-secondary);
  background: var(--theme-gradient-bottomToTop);
}
.workspace-drawer.mod-left .workspace-drawer-inner {
  border-top-right-radius: var(--radius-xl);
  border-bottom-right-radius: var(--radius-xl);
}
.workspace-drawer.mod-right .workspace-drawer-inner {
  border-top-left-radius: var(--radius-xl);
  border-bottom-left-radius: var(--radius-xl);
}

.mod-tappable,
.workspace-drawer-active-tab-back-icon,
.workspace-drawer-active-tab-icon {
  align-items: center;
  background-color: transparent;
  border-radius: var(--clickable-icon-radius);
  color: var(--theme-color-control);
  cursor: var(--cursor);
  display: flex;
  height: auto;
  justify-content: center;
  opacity: var(--icon-opacity);
  padding: var(--size-2-2) var(--size-2-3);
  transition: opacity 0.15s ease-in-out;
}
@media (hover: hover) {
  .mod-tappable:hover,
  .workspace-drawer-active-tab-back-icon:hover,
  .workspace-drawer-active-tab-icon:hover {
    /* Use hover state for feedback if using a pointing device */
    color: var(--theme-color-controlHover);
    background-color: var(--background-modifier-hover);
  }
}
.workspace-drawer-tab-option-item {
  border-radius: var(--clickable-icon-radius);
  padding: var(--size-2-2) var(--size-2-3);
}
@media (hover: hover) {
  .workspace-drawer-tab-option-item:hover {
    color: var(--theme-color-controlHover);
    background-color: var(--background-modifier-hover);
  }
  .workspace-drawer-tab-option-item:hover
    .workspace-drawer-tab-option-item-icon,
  .workspace-drawer-tab-option-item:hover
    .workspace-drawer-tab-option-item-title {
    color: var(--theme-color-controlHover);
  }
}
/* These are separate elements, but I want them to look like one */
.workspace-drawer-active-tab-icon,
.workspace-drawer-active-tab-icon + .workspace-drawer-active-tab-title {
  padding: var(--size-2-2) var(--size-2-3);
  border-radius: var(--clickable-icon-radius);
}
/* Match height of .workspace-drawer-active-tab-icon */
.workspace-drawer-active-tab-title {
  height: calc(24px + var(--size-2-2) * 2);
  vertical-align: baseline;
  line-height: 24px;
}
.workspace-drawer-active-tab-icon + .workspace-drawer-active-tab-title {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
  /* Hide gap */
  margin-left: calc(-1 * var(--size-4-2));
}
.workspace-drawer-active-tab-icon:has(+ .workspace-drawer-active-tab-title) {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}
@media (hover: hover) {
  .workspace-drawer-active-tab-icon + .workspace-drawer-active-tab-title:hover,
  .workspace-drawer-active-tab-icon:hover + .workspace-drawer-active-tab-title,
  .workspace-drawer-active-tab-icon:has(
      + .workspace-drawer-active-tab-title:hover
    ) {
    color: var(--theme-color-controlHover);
    background-color: var(--background-modifier-hover);
  }
}
/* #endregion */
/* #region   Pull action */
.pull-action.mod-activated {
  background-color: var(--interactive-accent);
  color: var(--text-on-accent);
}
.pull-down-action {
  top: 0.5rem;
  left: 0.5rem;
  right: 0.5rem;
  width: auto;
  max-width: 30rem;
  margin: var(--safe-area-inset-top) auto 0 auto;
  padding: 0.5em 1em;
  text-align: center;
  border-radius: var(--radius-l);
}
.pull-action {
  position: absolute;
  background-color: var(--background-secondary);
  z-index: var(--layer-popover);
  color: var(--text-muted);
  font-size: 90%;
  transition: background-color ease-in-out 150ms;
}
/* #endregion */
/* #region   Mobile modals */
.is-phone .modal-container {
  padding: max(calc(2 * var(--theme-spacing-mobileHorizontalSpacing)), 0.5rem);
}
.is-phone .mod-confirmation .modal {
  left: max(calc(var(--theme-spacing-mobileHorizontalSpacing)), 0.5rem);
  right: max(calc(var(--theme-spacing-mobileHorizontalSpacing)), 0.5rem);
  width: min(
    calc(
      100vw - 2 * var(--theme-spacing-mobileHorizontalSpacing),
      calc(100vw - 1rem)
    )
  );
}

.is-phone .modal .modal-title {
  margin-left: 2rem;
  margin-right: 2rem;
  position: relative;
}
.is-phone .modal.mod-sidebar-layout .modal-content > * {
  padding: 1em calc(1em + var(--safe-area-inset-right)) 1em
    calc(1em + var(--safe-area-inset-left));
}
.is-phone .vertical-tab-header-group {
  margin: 0 auto;
  width: 100%;
}
.is-phone .modal.mod-settings .vertical-tab-nav-item {
  display: flex;
  align-items: center;
  height: 44px;
  background-color: var(--theme-color-settingsGroupBg);
  padding: 0 0.75em;
  margin: 0;
  border-radius: 0;
  border: none;
  transition: background-color 200ms ease-in-out, color 200ms ease-in-out;
}
.is-phone .modal.mod-sidebar-layout .modal-title {
  border-bottom: none;
}
.is-phone.theme-setting-mobileCardsUI .modal.mod-sidebar-layout .modal-title {
  padding: 0.5rem 1rem 0.5rem 1rem;
}
.is-phone .modal.mod-settings .vertical-tab-content {
  background-color: var(--theme-color-settingsGroupBg);
  padding: var(--size-4-5) max(var(--size-4-5), var(--safe-area-inset-right))
    100px max(var(--size-4-5), var(--safe-area-inset-left));
  border-radius: var(--radius-m);
}
.is-phone {
  & .modal .modal-nav-action {
    top: 0.5rem;
  }
}
.is-phone .modal .modal-nav-action.mod-cta {
  color: var(--theme-color-controlText);
  right: 1rem;
}
.is-phone .modal .modal-nav-action.mod-secondary {
  left: 1rem;
}
.is-phone .mod-confirmation .modal .modal-title {
  border-bottom: none;
}
.is-phone.theme-setting-mobileCardsUI .modal.mod-lg .modal-close-button,
.is-phone.theme-setting-mobileCardsUI
  .modal.mod-sidebar-layout
  .modal-close-button {
  top: 0.5rem;
}
.is-phone.theme-setting-mobileCardsUI
  .modal.mod-sidebar-layout
  .modal-setting-back-button {
  top: 0.5rem;
  left: 1.5rem;
  padding: 0;
}
.is-phone.theme-setting-mobileCardsUI .community-modal-search-summary {
  padding: 0;
}
.is-phone .modal.mod-community-modal .modal-content .modal-sidebar {
  padding: 0;
}
.is-phone .mod-community-modal .community-modal-controls {
  padding: 1em;
}
/* #endregion */
/* #region   Mobile scaling */
/* Scale background elements smaller than foreground */
body.is-phone.theme-setting-mobileCardsUI:has(.modal-container)
  .workspace
  > .mod-root
  .mod-active,
body.is-phone.theme-setting-mobileCardsUI:has(.workspace-drawer)
  .workspace
  > .mod-root
  .mod-active {
  transition: transform 0.5s ease-in-out;
  transform: scale(0.95) translateY(-1.5rem);
}
body.is-phone.theme-setting-mobileCardsUI:not(
    :has(.modal-container:focus-within)
  ):not(:has(.modal))
  .workspace
  > .mod-root
  .mod-active {
  transition: transform 0.5s ease-in-out;
  transform: scale(1) translateY(0);
}
body.is-phone.theme-setting-mobileCardsUI:has(.modal-container)
  .workspace
  > .mod-root
  .mod-active
  .view-header-title-container {
  border-top-left-radius: var(--tab-radius);
  border-top-right-radius: var(--tab-radius);
}
body.is-phone.theme-setting-mobileCardsUI:has(.modal-container)
  .workspace
  > .mod-root
  .mod-active
  .view-content {
  border-bottom-left-radius: var(--tab-radius);
  border-bottom-right-radius: var(--tab-radius);
}
.is-phone.is-phone.theme-setting-mobileCardsUI .modal-container {
  padding: max(calc(var(--theme-spacing-mobileHorizontalSpacing)), 0.5rem);
}
.is-phone.theme-setting-mobileCardsUI .mod-confirmation .modal {
  left: max(calc(var(--theme-spacing-mobileHorizontalSpacing)), 0.5rem);
  right: max(calc(var(--theme-spacing-mobileHorizontalSpacing)), 0.5rem);
  width: min(
    calc(
      100vw - 2 * var(--theme-spacing-mobileHorizontalSpacing),
      calc(100vw - 1rem)
    )
  );
}
/* Style similarly to mobile prompt */
.is-phone.theme-setting-mobileCardsUI .modal.mod-sidebar-layout {
  width: min(
    calc(
      100vw - 2 * var(--theme-spacing-mobileHorizontalSpacing),
      calc(100vw - 1rem)
    )
  );
  margin-right: max(calc(var(--theme-spacing-mobileHorizontalSpacing)), 0.5rem);
  margin-left: max(calc(var(--theme-spacing-mobileHorizontalSpacing)), 0.5rem);
  margin-top: calc(var(--safe-area-inset-top) + var(--header-height) + 1em);
  border-radius: var(--radius-l) var(--radius-l) 0 0;
}
/* #endregion */
/* #region   Mobile toolbar */
.mobile-toolbar {
  background-color: var(--theme-color-mobileToolbarBg);
}
.mobile-toolbar-options-container.mod-fade:not(.mod-at-start):before,
.mobile-toolbar-options-container.mod-fade:not(.mod-at-end):after {
  background-color: var(--theme-color-mobileToolbarBg);
  background-position: 50% 50%;
  background-repeat: no-repeat;
  height: var(--mobile-toolbar-height);
  line-height: 1em;
  margin: 0;
  top: 0;
  width: 1rem;
  z-index: 1;
}
.mobile-toolbar-options-container.mod-fade:not(.mod-at-start):before {
  background-image: url('data:image/svg+xml; utf8, <svg width="8px" height="32px" viewBox="0 0 8 32" xmlns="http://www.w3.org/2000/svg" stroke="rgba(0,0,0,0.25)" fill="none" stroke-width="2"><path d="M7,1L1,16L7,31"/></svg>');
  content: "";
  left: 0;
}
.mobile-toolbar-options-container.mod-fade:not(.mod-at-end):after {
  background-image: url('data:image/svg+xml; utf8, <svg width="8px" height="32px" viewBox="0 0 8 32" xmlns="http://www.w3.org/2000/svg" stroke="rgba(0,0,0,0.25)" fill="none" stroke-width="2"><path d="M1,1L7,16L1,31"/></svg>');
  content: "";
  right: var(--toolbar-option-width);
}
/* #endregion */
/* #endregion */

/* #region Workspace */
/* #region   Overall workspace */
.app-container {
  background-color: var(--background-secondary);
  background: var(--theme-gradient-bottomToTop);
}
.theme-setting-fullWidthStatusBar .horizontal-main-container {
  margin-bottom: var(--theme-length-statusBarHeight);
}
.workspace {
  background: transparent;
}
.workspace-split.mod-root {
  background: transparent;
  background: var(--theme-gradient-topToBottom);
  padding-bottom: 1.5rem;
  padding: 0 0.5em var(--theme-length-statusBarHeight) 0.5em;

  .workspace-tabs.mod-top {
    padding-top: 0.5rem;
  }
}
.workspace-split.mod-horizontal {
  gap: 0.5rem;
}
.nav-header {
  padding: 0.5rem;
}
/* #endregion */
/* #region   Tabs */
.workspace-tabs .workspace-leaf {
  background: transparent;
}
.sidebar-toggle-button,
.workspace-tabs.mod-top,
.is-focused .sidebar-toggle-button,
.is-focused .workspace-tabs.mod-top {
  --tab-container-background: transparent;
}
.workspace-tab-header-container {
  padding: 0;
}
.workspace-tab-header-container-inner {
  gap: 0.25em;
}
.workspace-tab-header {
  color: var(--theme-color-textTabInactive);
  background-color: var(--tab-background-inactive);
  border-radius: var(--tab-radius-active) var(--tab-radius-active) 0 0;

  &.is-active {
    color: var(--tab-text-color-active);
    background-color: var(--tab-background-active);
    box-shadow: var(--theme-shadow-input);
  }
}
.workspace-tab-header-inner {
  padding: 0.5rem;
}
@media (hover: hover) {
  .workspace-tab-header:not(.is-active):hover .workspace-tab-header-inner {
    color: var(--icon-color-focused);
    background-color: var(--theme-color-tabBgInactiveHover);
  }
  .workspace-tab-header-inner:hover .workspace-tab-header-inner-icon {
    color: var(--icon-color-focused);
    opacity: var(--icon-opacity);
  }
}
/* Tabs with Obsidian navigation or data (as opposed to user content) can have a different inactive color */
.theme-setting-distinguishNonContentTabs {
  .workspace-tab-header[data-type="calendar"]:not(.is-active),
  .workspace-tab-header[data-type="graph"]:not(.is-active),
  .workspace-tab-header[data-type="localgraph"]:not(.is-active),
  .workspace-tab-header[data-type="map"]:not(.is-active) {
    background-color: var(--theme-color-tabNavBg);
  }
}
.is-mobile .mod-root .workspace-tab-header-container {
  min-height: 44px;
}

.workspace .mod-root {
  .workspace-tabs {
    padding: 0 0.5em 0 0.5em;
    border-radius: 0;
  }
  .workspace-tabs .workspace-tab-container {
    background-color: var(--background-primary);
    border-radius: var(--tab-radius);
    box-shadow: var(--theme-shadow-input);
  }
  .workspace-tab-header-container-inner {
    /* Define spacing on tabs to fit with radius */
    padding: 0 calc(var(--tab-radius) * 2) 0 calc(var(--tab-radius) * 2);
  }
  .workspace-tab-header {
    padding: 0;
  }
  .workspace-tab-header.is-active .workspace-tab-header-inner {
    padding-left: 0.25rem;
  }
  .workspace-tab-header-inner::after {
    /* Not sure what this is for */
    background: transparent;
  }
  .workspace-tab-header-inner {
    border-radius: var(--tab-radius-active) var(--tab-radius-active) 0 0;
    container-name: root-tab;
    container-type: size;
    padding: 0.5rem;
  }
  /* Show icons for markdown tabs, unless they get too narrow. */
  .workspace-tab-header[data-type="markdown"] .workspace-tab-header-inner-icon,
  .workspace-tab-header[data-type="empty"] .workspace-tab-header-inner-icon {
    display: none;
  }
  @container root-tab (min-width: 5em) {
    .workspace-tab-header[data-type="markdown"]
      .workspace-tab-header-inner-icon,
    .workspace-tab-header[data-type="empty"] .workspace-tab-header-inner-icon {
      display: flex;
    }
  }
}
/* #region     Empty state */
.empty-state-container {
  background: var(--theme-color-emptyStateBg);
  border-radius: var(--radius-m);
  max-height: none;
  max-width: none;
  padding: 1em 1.5em 1.5em 1.5em;
}
.empty-state-action-list,
.is-mobile .empty-state-action-list {
  display: flex;
  flex-direction: column;
  gap: 0.5em;
  margin-top: 0;
}
.empty-state-action-list .empty-state-action {
  padding: 0 1.5em;
}
.empty-state-action-list .empty-state-action.mod-close {
  display: none;
}
/* #endregion */
/* #region     Sidebars */
.mod-sidedock {
  .workspace-tabs {
    gap: 0;
  }
  .workspace-tab-header-container {
    margin-top: 0;
  }
  .workspace-tabs.mod-top > .workspace-tab-header-container {
    margin-top: 0.5em;
  }
  .workspace-tab-header-container-inner {
    margin: 0 0 0 0;
  }
  .workspace-tab-header-container-inner:has(
      .workspace-tab-header[data-type="markdown"].is-active:last-child
    ) {
    border-bottom-right-radius: 0;
  }
  .workspace-tab-header-container-inner:has(
      .workspace-tab-header[data-type="markdown"].is-active:first-child
    ) {
    border-bottom-left-radius: 0;
  }

  .workspace-tab-header[data-type="markdown"] {
    background-color: var(--tab-background-inactive);
    color: var(--theme-color-textTabInactive);
  }
  .workspace-tab-header[data-type="markdown"].is-active {
    background-color: var(--tab-background-active);
    color: var(--tab-text-color-active);
    border-radius: var(--tab-radius-active) var(--tab-radius-active) 0 0;

    .workspace-tab-header-inner-icon {
      color: var(--icon-color);
    }
  }
  .workspace-leaf-content[data-type="markdown"] {
    padding: 0 1rem;

    .view-content {
      background-color: var(--tab-background-active);
      border-radius: var(--tab-radius);
    }
  }
}
.is-focused .mod-sidedock {
  .workspace-tab-header[data-type="markdown"].is-active {
    color: var(--tab-text-color-focused-active);

    .workspace-tab-header-inner-icon {
      color: var(--tab-text-color-focused-active-current);
    }
  }
}
.mod-left-split .workspace-tab-header-container,
.mod-right-split .workspace-tab-header-container {
  justify-content: center;
}
.mod-left-split .workspace-tab-header-container-inner,
.mod-right-split .workspace-tab-header-container-inner {
  background: var(--tab-background-inactive);
}
.mod-left-split .workspace-tab-header-container-inner,
.mod-right-split .workspace-tab-header-container-inner {
  border-radius: var(--radius-s);
  gap: 0;
  padding: 0;
}
.mod-left-split .workspace-tab-header,
.mod-right-split .workspace-tab-header {
  border-radius: 0;
}
.is-focused
  .mod-active
  .workspace-tab-header.is-active
  .workspace-tab-header-inner-icon {
  color: var(--text-normal);
}
.is-focused
  .mod-left-split
  .workspace-tab-header.is-active
  .workspace-tab-header-inner-icon,
.is-focused
  .mod-right-split
  .workspace-tab-header.is-active
  .workspace-tab-header-inner-icon {
  color: var(--icon-color-focused);
}
.mod-left-split .workspace-tab-header.has-active-menu,
.mod-right-split .workspace-tab-header.has-active-menu,
.mod-left-split .workspace-tab-header.is-active,
.mod-right-split .workspace-tab-header.is-active {
  background: var(--theme-color-switcherBgActive);
}
.mod-left-split .workspace-tab-header-spacer,
.mod-right-split .workspace-tab-header-spacer {
  display: none;
}
.mod-left-split .workspace-tab-header-inner,
.mod-right-split .workspace-tab-header-inner {
  border-radius: 0;
}
/* #endregion */
/* #endregion */
/* #region   Stacked tabs */
.workspace
  .mod-root
  .workspace-tabs.mod-stacked
  .workspace-tab-container
  .workspace-tab-header {
  background-color: var(--tab-background-inactive);
  box-shadow: var(--theme-shadow-input);
}
.workspace
  .mod-root
  .workspace-tabs.mod-stacked
  .workspace-tab-container
  .workspace-tab-header.is-active {
  background-color: var(--background-primary);
} /* #endregion */
/* #region   Ribbon */
.workspace-ribbon {
  padding-left: 0;
  margin-bottom: 2.5rem;
}
.side-dock-actions {
  border-top-right-radius: var(--radius-m);
  border-bottom-right-radius: var(--radius-m);
  padding: var(--size-2-3);
  background: var(--ribbon-background);
}
.side-dock-actions .side-dock-ribbon-action {
  margin: 0;
}
.side-dock-actions .side-dock-ribbon-action.clickable-icon {
  color: var(--theme-color-control);
  height: 2em;
  width: 2em;
}
.side-dock-actions .side-dock-ribbon-action.clickable-icon.is-active {
  color: var(--theme-color-controlActive);
}
/* #endregion */
/* #region   Sidedock Vault Profile */
body:not(.is-mobile)
  .workspace-split.mod-left-split
  .workspace-sidedock-vault-profile {
  background-color: transparent;
  padding: 0 0.5rem 0.25em 0.5rem;
}
body.show-ribbon:not(.is-mobile)
  .workspace-split.mod-left-split
  .workspace-sidedock-vault-profile {
  margin-left: calc(-1 * var(--ribbon-width));
  width: calc(100% + var(--ribbon-width));
}
/* #endregion */
/* #region   Status bar */
.status-bar {
  border: none;
  border-top-left-radius: var(--radius-m);
  border-top-right-radius: var(--radius-m);
  gap: 1rem;
  padding: 0 0.5rem 0.25em 0.5rem;
  right: auto;
  left: 50%;
  bottom: 0;
  transform: translateX(-50%);
  height: var(--theme-length-statusBarHeight);
  justify-content: space-between;
}
.theme-setting-fullWidthStatusBar .status-bar {
  width: 100%;
}
.status-bar-item {
  line-height: 1rem;
  padding: 0.25em 0.5em;
  width: auto;
  white-space: nowrap;
  gap: 0.25em;
  height: 100%;
}
.status-bar-item:has(.status-bar-item) {
  padding: 0;
}
.status-bar-item.mod-clickable {
  color: var(--theme-color-control);
}
@media (hover: hover) {
  .status-bar-item.mod-clickable:hover {
    color: var(--theme-color-controlHover);
  }
}
.theme-picker-color-scheme-icon > svg {
  fill: var(--theme-color-control);
}
@media (hover: hover) {
  .theme-picker-color-scheme-icon:hover > svg {
    fill: var(--theme-color-controlHover);
  }
}
@media (hover: hover) {
  .status-bar-item:hover .sync-status-icon.mod-working {
    color: var(--text-normal);
  }
}
.status-bar-item.plugin-editor-status,
.status-bar-item.plugin-sync {
  padding: 0.25em 0.5em;
}
/* #endregion */
/* #region   Panes */
.pane-empty {
  color: var(--empty-pane-color);
}
/* #endregion */
/* #region   Window frame styles */
body.mod-macos {
  position: relative;

  .workspace-tab-header-new-tab,
  .workspace-tab-header-tab-list {
    padding: 0;
    margin: 0;
  }

  /* "Native frame" style (my preferred) */
  &:not(.is-frameless) {
    &:not(.is-tablet) {
      .sidebar-toggle-button.mod-left,
      .sidebar-toggle-button.mod-right {
        padding: 0;
        position: absolute;
      }

      &:not(.is-fullscreen) {
        .workspace.is-left-sidedock-open {
          .sidebar-toggle-button.mod-left {
            top: 0.5em;
          }
        }
        .workspace:not(.is-left-sidedock-open) {
          .sidebar-toggle-button.mod-left {
            top: 0.5em;
          }
        }
        .workspace:not(.is-right-sidedock-open) {
          .sidebar-toggle-button.mod-right {
            top: 0;
            right: -0.5em;
          }
          .workspace-tab-header-container {
            padding-right: 1.5em;
          }
        }
        .workspace.is-right-sidedock-open {
          .sidebar-toggle-button.mod-right {
            top: 0;
            right: 0.5em;
          }
        }
      }
    }
    &.is-tablet {
      .sidebar-toggle-button.mod-left,
      .sidebar-toggle-button.mod-right {
        padding: 0;
      }
      .sidebar-toggle-button.mod-left {
        top: 0;
        left: 0;
      }
      .sidebar-toggle-button.mod-right {
        top: 0;
        right: 0;
      }
    }
  }

  /* "Obsidian frame" style */
  &.is-frameless:not(.is-hidden-frameless):not(.is-popout-window) {
    --titlebar-height: 40px;

    &:not(.is-tablet) {
      .sidebar-toggle-button.mod-left,
      .sidebar-toggle-button.mod-right {
        padding: 0;
        position: absolute;
      }

      &:not(.is-fullscreen) {
        .workspace.is-left-sidedock-open {
          .sidebar-toggle-button.mod-left {
            top: 0.5em;
          }
        }
        .workspace:not(.is-left-sidedock-open) {
          .sidebar-toggle-button.mod-left {
            top: 0.5em;
          }
        }
        .workspace:not(.is-right-sidedock-open) {
          .sidebar-toggle-button.mod-right {
            top: 0;
            right: -0.5em;
          }
          .workspace-tab-header-container {
            padding-right: 1.5em;
          }
        }
        .workspace.is-right-sidedock-open {
          .sidebar-toggle-button.mod-right {
            top: 0;
            right: 0.5em;
          }
        }
      }
      &.is-fullscreen {
        .workspace.is-left-sidedock-open {
          .sidebar-toggle-button.mod-left {
            top: 0.5em;
          }
        }
        .workspace:not(.is-left-sidedock-open) {
          .sidebar-toggle-button.mod-left {
            top: 0.5em;
          }
        }
        .workspace.is-right-sidedock-open {
          .sidebar-toggle-button.mod-right {
            top: 0;
            right: 0.5em;
          }
        }
        .workspace:not(.is-right-sidedock-open) {
          .sidebar-toggle-button.mod-right {
            top: 0;
            right: -0.5em;
          }
          .mod-root .workspace-tab-header-container {
            padding-right: 1.5em;
          }
        }
        .workspace-ribbon .sidebar-toggle-button.mod-left {
          left: 0;
        }
      }
    }
    &.is-tablet {
      .sidebar-toggle-button.mod-left,
      .sidebar-toggle-button.mod-right {
        padding: 0;
      }
      .sidebar-toggle-button.mod-left {
        top: 0;
        left: 0;
      }
      .sidebar-toggle-button.mod-right {
        top: 0;
        right: 0;
      }
    }
  }

  /* "Hidden (default)" style. This is the default appearance! */
  /* In this window style we need to make sure buttons don't overlap the window controls. */
  &.is-frameless.is-hidden-frameless:not(.is-popout-window) {
    &:not(.is-tablet) {
      &:not(.is-fullscreen) {
        .sidebar-toggle-button.mod-left,
        .sidebar-toggle-button.mod-right {
          padding: 0;
          position: absolute;
        }

        .workspace:not(.is-left-sidedock-open) {
          .mod-root .workspace-tab-header-container {
            padding-left: calc(var(--frame-left-space) + 0.5em);
          }

          .sidebar-toggle-button.mod-left {
            left: calc(var(--frame-left-space) - 1.5em);
            top: -0.25em;
            padding: 0;
          }
        }
        .workspace.is-left-sidedock-open {
          .mod-left-split .workspace-tab-header-container {
            padding-left: calc(var(--frame-left-space) + 1.5em);
          }

          .sidebar-toggle-button.mod-left {
            left: calc(var(--frame-left-space) - 0.5em);
            top: -0.25em;
            padding: 0;
          }
        }
        .workspace:not(.is-right-sidedock-open) {
          .sidebar-toggle-button.mod-right {
            top: -0.25em;
            right: -0.5em;
          }
        }
        .workspace.is-right-sidedock-open {
          .sidebar-toggle-button.mod-right {
            top: -0.25em;
            right: 0.5em;
          }
        }
      }
    }
    &.is-tablet {
      .sidebar-toggle-button.mod-left,
      .sidebar-toggle-button.mod-right {
        padding: 0;
      }
      .sidebar-toggle-button.mod-left {
        position: absolute;
        top: 0;
        left: 0;
      }
      .sidebar-toggle-button.mod-right {
        top: 0.5em;
        right: 0;
      }
      .mod-root .workspace-tab-header-container {
        padding-left: calc(var(--frame-left-space) + 1em);
      }
    }
  }
}
.mod-windows {
  position: relative;

  /* TODO: style sidebar toggle buttons, accounting for window control positions */
  /* "Obsidian frame" option */
  &.is-frameless:not(.is-hidden-frameless) {
    /* Override default appearance for .mod-close, as this one simulates a system control. */
    .titlebar-button.mod-close {
      border-radius: 0;
      width: auto;
    }
  }

  /* "Hidden (default)" option. This is the default appearance! */
  &.is-frameless.is-hidden-frameless:not(.is-popout-window) {
    /* Override default appearance for .mod-close, as this one simulates a system control. */
    .titlebar-button.mod-close {
      border-radius: 0;
      width: auto;
    }

    .titlebar-button.mod-logo {
      /* This is hidden by default. I'm not sure why, as it provides access to the main menu. */
      display: flex;
    }

    .workspace-ribbon.side-dock-ribbon.mod-left {
      margin-top: calc(var(--header-height) + 2em);
    }

    .sidebar-toggle-button.mod-left {
      top: 2em;
    }

    /* &:not(.is-fullscreen) {
      .sidebar-toggle-button.mod-left {
        position: absolute;
      }

      .workspace-ribbon.mod-left {
        margin-top: 2.5em;
        padding-top: 0;
      }
      .mod-right-split .mod-top .workspace-tab-header-container {
        position: relative;
        padding-right: calc(var(--frame-right-space) + 30px);

        .sidebar-toggle-button.mod-right {
          position: absolute;
          right: var(--frame-right-space);
        }
      }

      .workspace.is-left-sidedock-open {
        .mod-left-split .workspace-tabs {
          overflow: visible;
        }
        .sidebar-toggle-button.mod-left {
          left: var(--ribbon-width);
          top: 0.5em;
          padding: 0;
        }
      }
      .workspace:not(.is-left-sidedock-open) {
        .mod-root .workspace-tabs.mod-top {
          overflow: visible;
        }
        .sidebar-toggle-button.mod-left {
          left: var(--ribbon-width);
          top: 0.5em;
          padding: 0;
        }
        .mod-root .workspace-tab-header-container {
          padding-left: calc(var(--icon-size) + 1rem);
        }
      }
      .workspace:not(.is-right-sidedock-open) {
      }
      .workspace:not(.is-right-sidedock-open) {
        .sidebar-toggle-button.mod-right {
          left: var(--frame-right-space);
          top: -0.5em;
          padding: 0;
        }
      }
    } */
  }
}
.mod-linux {
  /* TODO */
}

/* #endregion */
/* #endregion */

/* #region Dragging */
.workspace-drop-overlay:before {
  animation: 0.5s 1 alternate fadein;
  background-color: var(--theme-color-dragTarget);
  border-radius: var(--radius-m);
  opacity: 1;
}
.workspace-fake-target-overlay {
  background: transparent;
}
/* #endregion */
/* #region Menus */
/* Rendered on mobile, or if native menus are disabled */
.menu {
  background-color: var(--theme-color-menuBg);
  border: 0;
  box-shadow: var(--shadow-l);
  border-radius: var(--radius-l);
  margin: 0 1rem;
  padding: 0.5em;
}
.is-phone .menu {
  padding: 0.5rem 0.5rem var(--safe-area-inset-bottom) 0.5rem;
  width: calc(
    100% - var(--safe-area-inset-left) - var(--safe-area-inset-right) - 2 *
      var(--theme-spacing-mobileHorizontalSpacing) -
      max(2 * var(--theme-spacing-mobileHorizontalSpacing), 1rem)
  );
}
.menu-item {
  height: 2em;
}
.menu-item,
.menu-item-icon {
  color: var(--nav-item-color);
  background-color: var(--nav-item-background);
}
.menu-item.selected:not(.is-label):not(.is-disabled) {
  background-color: var(--nav-item-background);
  border-radius: var(--radius-s);
  box-shadow: 0 0 0 2px var(--background-modifier-border-focus);
}
.menu-item.selected:not(.is-label):not(.is-disabled):hover {
  background-color: var(--nav-item-background-hover);
}
.menu-separator {
  margin: 0.75em 0.5em;
}
@media (hover: hover) {
  .menu-item:hover {
    color: var(--nav-item-color-hover);
    background-color: var(--nav-item-background-hover);
    font-weight: var(--nav-item-weight-hover);
  }
  .menu-item:hover .menu-item-icon {
    color: var(--nav-item-color-hover);
  }
}
/* #endregion */
/* #region Messages */

.mod-warning,
p.mod-warning,
.setting-message {
  border-radius: var(--clickable-icon-radius);
  font-size: var(--font-ui-small);
  background: var(--theme-color-warningBg);
  padding: 0.5em 1em;
}
.mod-warning:not(button) {
  display: inline-block;
  margin: 0.5em 0;
  border: solid var(--text-error) 0.125em;
}
/* Collapse adjacent messages */
p.mod-warning ~ p.mod-warning,
p.setting-message ~ p.setting-message {
  margin-bottom: 0;
  padding-top: 0;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  display: block;
  border-top: none;
}
p.mod-warning:has(+ p.mod-warning, .setting-message),
.setting-message:has(+ p.mod-warning, .setting-message) {
  border-top-left-radius: var(--clickable-icon-radius);
  border-top-right-radius: var(--clickable-icon-radius);
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
  border-bottom: none;
  margin-bottom: 0;
  display: block;
}
/* #endregion */
/* #region Close buttons */

.mod-close,
.modal-close-button,
.document-search-close-button,
.workspace-tab-header-inner-close-button,
.slides-close-btn,
.clickable-icon.kanban-plugin__search-cancel-button,
.clickable-icon.kanban-plugin__lane-settings-button[aria-label="Close"] {
  background-color: transparent;
  border-radius: 1.5rem;
  border: none;
  color: var(--theme-color-control);
  /* Above .modal-title */
  z-index: 2;
  width: 1.5rem;
  height: auto;
}
.workspace-tab-header-inner-close-button .svg-icon {
  stroke: var(--theme-color-control);
}
@media (hover: hover) {
  .mod-close:hover,
  .modal-close-button:hover,
  .document-search-close-button:hover,
  .workspace-tab-header-inner-close-button:hover,
  .workspace-tab-header.is-active
    .workspace-tab-header-inner-close-button:hover,
  .mod-sync-history .modal-close-button:hover,
  .mod-settings .modal-close-button:hover,
  .workspace-tab-header-inner-close-button:hover,
  .slides-close-btn:hover,
  .clickable-icon.kanban-plugin__search-cancel-button:hover,
  .clickable-icon.kanban-plugin__lane-settings-button[aria-label="Close"]:hover {
    color: var(--theme-color-control);
    background-color: var(--theme-color-navigationButtonBgHover);
  }
  .workspace-tab-header:hover
    .workspace-tab-header-inner-close-button
    .svg-icon {
    stroke: var(--theme-color-controlHover);
  }
}

/* close buttons that use a text cross instead of an SVG */
.document-search-close-button,
.modal-close-button,
.is-mobile .document-search .document-search-close-button,
.is-mobile .document-replace .document-search-close-button {
  padding: var(--size-2-1);
  width: 1.5rem;
  height: 1.5rem;
  display: flex;
  align-content: center;
  --icon-size: var(--icon-s);
  --icon-stroke: var(--icon-s-stroke-width);
  text-align: center;
  justify-content: center;
  line-height: 20px;
}
.document-search-close-button:before,
.modal-close-button:before {
  /* This uses a text cross instead of an SVG. Hack for visual alignment. */
  margin-top: -1px;
}

/* Tab close button on left, macOS standard */
.mod-macos {
  .workspace .mod-root {
    .workspace-tab-header .workspace-tab-header-inner-close-button {
      position: static;
      order: 0;
    }
    .workspace-tab-header-inner-icon,
    .workspace-tab-header-inner-title {
      order: 1;
    }
  }
  .modal-close-button {
    left: var(--size-2-3);
    right: auto;
  }
  .mod-community-modal .modal-sidebar .setting-item:first-child {
    margin-left: auto;
  }
  .modal-sidebar .community-modal-controls {
    padding-left: var(--size-4-5);
  }
  .multi-select-pill {
    padding-left: 0.25em;

    .multi-select-pill-remove-button {
      order: 0;
    }
    .multi-select-pill-content {
      order: 1;
      margin: 0;
    }
  }
}
/* #endregion */
/* #region Navigation buttons */
/* Styled similarly to close button */

.modal-setting-back-button-icon,
.mod-root .workspace-tab-header-status-icon {
  color: var(--theme-color-control);
  border: none;
  border-radius: 100%;
  background-color: transparent;
  /* Above .modal-title */
  z-index: 2;
  display: flex;
  justify-content: center;
  align-content: center;
  width: 1.5rem;
  height: 1.5rem;
}
@media (hover: hover) {
  .modal-setting-back-button-icon:hover,
  .mod-root .workspace-tab-header-status-icon:hover {
    color: var(--theme-color-control);
    background-color: var(--theme-color-navigationButtonBgHover);
  }
  .mod-root .workspace-tab-header-status-icon .svg-icon {
    width: 80%;
  }
}
/* #endregion */
/* #region Notices */
/* Note that Excalidraw .HintView uses a smaller version, which could be generalised */
.notice-container {
  padding: 0;
  right: 1rem;
  top: 1rem;
}
.is-mobile .notice-container {
  padding: 0.5em 0.5em 2em 0.5em;
  top: var(--safe-area-inset-top);
  left: auto;
  right: var(--safe-area-inset-right);
}
.is-phone .notice-container {
  padding: 0.5em 0.5em 2em 0.5em;
  top: auto;
  left: var(--safe-area-inset-left);
  right: var(--safe-area-inset-right);
  max-width: 100%;
  margin: 0 auto;
  bottom: max(3rem, var(--safe-area-inset-bottom));
}
.notice,
.is-phone .notice {
  border-radius: 1em;
  background-color: var(--background-modifier-message);
  color: var(--theme-color-notice);
  box-shadow: var(--shadow-s);
  padding: 1em 1.5em;
}
.notice {
  margin: 0 0 1rem 0;
}
.is-phone .notice {
  text-align: center;
  max-width: none;
  width: auto;
  margin: 0 0.5rem 1rem 0.5rem;
}
/* #endregion */
/* #region Content references (search results, incoming/outgoing links, etc.) */

.search-result-file-matches {
  background: none;
  box-shadow: none;
  display: flex;
  gap: 0.5em;
  flex-direction: column;
  margin: 0;
}
.search-result-file-match,
.sync-history-list-item {
  background: var(--theme-color-contentItemBg);
  border: none;
  border-radius: var(--radius-s);
  box-shadow: none;
  color: var(--nav-item-color);
  font-weight: var(--nav-item-weight);
  padding: 0.5em 1em;
}
@media (hover: hover) {
  .search-result-file-match:hover,
  .sync-history-list-item:hover {
    background: var(--theme-color-contentItemBgHover);
    cursor: pointer;
    font-weight: var(--nav-item-weight-hover);
  }
  .search-result-hover-button:hover {
    color: var(--theme-color-controlHover);
  }
}
.sync-history-list-item:has(.sync-history-list-item-header.is-active) {
  background: var(--theme-color-contentItemBgActive);
}
.search-result-file-matched-text {
  font-weight: bold;
}
.search-result:not(.is-collapsed) .search-result-file-title {
  color: var(--theme-color-control);
}
/* #endregion */
/* #region Trees */

.tree-item-self,
.tree-item-self.mod-collapsible {
  gap: 0.5em;
  justify-content: flex-start;
  /* Setting padding-left to zero here, as it's sometimes overridden e.g. in file list */
  padding: 0.25em 0.5em 0.25em 0;
  padding: 0;
}
.tree-item-self .tree-item-icon {
  /* Icons that represent an object have the same colour as the related text */
  color: inherit;
  margin: 0;
  position: relative;
}
/* These are set the same so we can use consistent em unites for spacing */
.tree-item-self,
.tree-item-children {
  font-size: var(--nav-item-size);
}
/* #endregion */
/* #region Suggestions (Search, File Recovery, Slash commands) */
.suggestion-container,
.suggestion-container.mod-search-suggestion,
.kanban-plugin__autocomplete {
  display: flex;
  background-color: var(--theme-color-suggestionBg);
  border: none;
  border-radius: 0.5rem;
  box-shadow: var(--shadow-s);
  list-style: none;
  padding: 0.5rem;
  margin: 0;
}
.suggestion,
.suggestion-container.mod-search-suggestion .suggestion {
  background: transparent;
  padding: 0;
}
.suggestion-container .prompt-instructions {
  border-bottom-left-radius: 0.5rem;
  border-bottom-right-radius: 0.5rem;
  margin: 0 -0.5rem -0.5rem -0.5rem;
}
.suggestion-title.list-item-part {
  color: var(--text-normal);
}
.suggestion-aux {
  gap: 0.25em;
}
.suggestion-item,
.kanban-plugin__autocomplete-item,
.kanban-plugin__autocomplete-item-active {
  border: none;
  border-radius: 0.5em;
  padding: 0.5em 1em;
}
@media (hover: hover) {
  .suggestion-item:hover,
  .kanban-plugin__autocomplete-item:hover,
  .kanban-plugin__autocomplete-item-active:hover {
    background: var(--nav-item-background-hover);
  }
}
.suggestion-item.mod-group,
.suggestion-item.mod-group .suggestion-title {
  color: var(--text-muted);
  padding: inherit;
  text-transform: lowercase;

  > *,
  &:first-line {
    text-transform: capitalize;
  }
}
.search-suggest-item.mod-group {
  padding: 0 1em;
}
.search-suggest-item.mod-group:not(:first-child) {
  border-top: none;
  margin: 1em 0 0 0;
  padding: 0 1em;
}

.kanban-plugin__autocomplete-item-active {
  background: inherit;
  color: inherit;
}
.suggestion-item.is-selected {
  background-color: var(--nav-item-background-hover);
  color: var(--nav-item-color-hover);
}
.suggestion-item.is-selected .suggestion-flair {
  color: var(--nav-item-color-active);
}
/* #endregion */
/* #region Hotkeys */

.suggestion-hotkey,
.setting-hotkey {
  background: transparent;
  border: solid 1px var(--theme-color-hotkey);
  color: var(--theme-color-hotkey);
  font-size: var(--font-ui-smaller);
  font-family: var(--font-interface);
  padding: 2px 6px;
  border-radius: var(--radius-s);
}
.suggestion-item.is-selected .suggestion-hotkey {
  border-color: var(--theme-color-textSelected);
  color: var(--theme-color-textSelected);
}
.setting-hotkey.has-conflict {
  background: transparent;
  border: solid 1px var(--background-modifier-error);
  color: var(--background-modifier-error);
}
/* #endregion */
/* #region Action lists */
.vertical-tab-header-group-title {
  color: var(--text-normal);
}
.horizontal-tab-nav-item,
.vertical-tab-nav-item {
  color: var(--theme-color-control);
}
/* #endregion */
/* #region Standardised Controls */
/* #region   Buttons */
/* #region     Clickable icon buttons */
.markdown-source-view.mod-cm6 .code-block-flair,
.clickable-icon,
.setting-item-control .clickable-icon,
.mod-community-modal .modal-sidebar button.clickable-icon,
.metadata-property-icon,
.markdown-embed-link,
.file-embed-link,
.markdown-source-view.mod-cm6 .edit-block-button,
.tasks-edit,
.workspace-tab-header-tab-list .clickable-icon,
.workspace-tab-header-new-tab .clickable-icon,
.map-view-main
  .mv-icon-button
  .map-view-main
  .leaflet-control-container
  .leaflet-top.leaflet-right
  a {
  align-items: center;
  background-color: transparent;
  border-radius: var(--clickable-icon-radius);
  border: none;
  box-shadow: none;
  color: var(--theme-color-control);
  cursor: var(--cursor);
  display: flex;
  height: 2em;
  justify-content: center;
  min-height: var(--input-height);
  opacity: var(--icon-opacity);
  padding: 0.25rem;
  text-decoration: none;
  transition: opacity 0.15s ease-in-out;
  min-width: 2em;
  width: auto;
}

.is-mobile .clickable-icon {
  min-height: 44px;
  min-width: 44px;
}
@media (hover: hover) {
  .markdown-source-view.mod-cm6 .code-block-flair:hover,
  .clickable-icon:hover,
  .side-dock-actions .side-dock-ribbon-action.clickable-icon:hover,
  .mod-community-modal .modal-sidebar button.clickable-icon:hover,
  .metadata-property-icon:hover,
  .markdown-embed-link:hover,
  .file-embed-link:hover,
  .markdown-source-view.mod-cm6 .edit-block-button:hover,
  .tasks-edit:hover,
  .map-view-main .mv-icon-button:hover {
    color: var(--theme-color-controlHover);
    background-color: var(--background-modifier-hover);
  }
}
.clickable-icon.is-active,
.map-view-main .mv-icon-button.on {
  opacity: var(--icon-opacity-hover);
  color: var(--theme-color-controlLightweightActive);
  background-color: var(--theme-color-interactiveActive);
}
@media (hover: hover) {
  .clickable-icon.is-active:hover {
    background-color: var(--background-modifier-hover);
    color: var(--theme-color-controlHover);
  }
}
/* #endregion */
/* #region     Regular buttons */
button:not(.clickable-icon):not(.dropdown-menu-item),
button:not(.clickable-icon).mod-cta,
.sync-history-load-more-button,
.empty-state-action,
.is-mobile .document-search .document-search-button,
.is-mobile .document-replace .document-search-button,
.style-settings-import-label,
.style-settings-copy,
.style-settings-download,
.style-settings-import,
.style-settings-export {
  background-color: var(--theme-color-controlBg);
  border: none;
  border-radius: var(--button-radius);
  box-shadow: var(--theme-shadow-control);
  color: var(--theme-color-controlText);
  padding: 0.25em 0.5em;
  min-height: var(--input-height);
  height: auto;
  text-decoration: none;
}
@media (hover: hover) {
  button:not(.clickable-icon):not(.dropdown-menu-item):hover,
  button:not(.clickable-icon).mod-cta:hover,
  .sync-history-load-more-button:hover,
  .empty-state-action:hover,
  .is-mobile .document-search .document-search-button:hover,
  .is-mobile .document-replace .document-search-button:hover,
  .style-settings-import-label:hover,
  .style-settings-copy:hover,
  .style-settings-download:hover,
  .style-settings-import:hover,
  .style-settings-export:hover {
    border: none;
    background: var(--theme-color-controlBgHover);
    color: var(--theme-color-controlTextHover);
    text-decoration: none;
  }
}
button:not(.clickable-icon):not(.dropdown-menu-item):focus,
button:not(.clickable-icon).mod-cta:focus,
.sync-history-load-more-button:focus,
.empty-state-action:focus,
.is-mobile .document-search .document-search-button:focus,
.is-mobile .document-replace .document-search-button:focus,
.style-settings-import-label:focus,
.style-settings-copy:focus,
.style-settings-download:focus,
.style-settings-import:focus,
.style-settings-export:focus {
  box-shadow: 0 0 0 3px var(--background-modifier-border-focus);
}

/* Buttons - regular but small */
button.search-result-file-match-replace-button {
  min-height: auto;
}
/* #endregion */
/* #region     Lightweight buttons */
.search-result-file-match-destination-file {
  border: none;
  box-shadow: var(--theme-shadow-control);
  background-color: var(--theme-color-controlBgLowWeight);
  color: var(--theme-color-controlText);
  font-size: var(--font-ui-smaller);
  line-height: var(--line-height-tight);
  min-height: 0;
  padding: 0.25em 0.5em;
}
.search-result-file-match-destination-file:focus {
  box-shadow: 0 0 0 3px var(--background-modifier-border-focus);
  outline: none;
}
@media (hover: hover) {
  .search-result-file-match:hover
    .search-result-file-match-destination-file:hover {
    border: none;
    background: var(--theme-color-controlBgHover);
    color: var(--theme-color-controlTextHover);
  }
  .search-result-file-match:hover
    .search-result-file-match-destination-file:hover
    .search-result-file-match-destination-file-icon {
    color: var(--theme-color-controlTextHover);
  }
}
/* #endregion */
/* #endregion */
/* #region   Lightweight form controls */
/* Form controls that are rendered as text until they have focus */

.metadata-property .metadata-property-key input,
.metadata-property .metadata-property-value {
  border: none;
  border-radius: var(--input-radius);
  box-shadow: none;
  display: flex;
  background: transparent;
  height: 100%;
  padding: 0 0.5em;
}
.metadata-property .metadata-property-value input {
  box-shadow: none;
}
@media (hover: hover) {
  .metadata-property .metadata-property-key input:hover,
  .metadata-property .metadata-property-value:hover {
    background: var(--background-input);
  }
}
.metadata-property .metadata-property-key input:focus,
.metadata-property .metadata-property-value:focus-within {
  border: none;
  background: var(--background-input);
  box-shadow: 0 0 0 var(--input-border-width)
    var(--background-modifier-border-focus);
  color: var(--text-normal);
}
/* #endregion */
/* #region   Text fields */
.search-input-container input[type="search"],
input.document-search-input,
input[type="email"],
input[type="number"],
input[type="password"],
input[type="search"],
input[type="text"],
textarea {
  box-shadow: 0 0 0 var(--input-border-width) var(--theme-color-base);
  border: none;
  background: var(--background-input);
}

.search-input-container input[type="search"]:active,
.search-input-container input[type="search"]:focus-visible,
.search-input-container input[type="search"]:focus,
input.document-search-input:active,
input.document-search-input:focus-visible,
input.document-search-input:focus,
input[type="email"]:active,
input[type="email"]:focus-visible,
input[type="email"]:focus,
input[type="number"]:active,
input[type="number"]:focus-visible,
input[type="number"]:focus,
input[type="password"]:active,
input[type="password"]:focus-visible,
input[type="password"]:focus,
input[type="search"]:active,
input[type="search"]:focus-visible,
input[type="search"]:focus,
input[type="text"]:active,
input[type="text"]:focus-visible,
input[type="text"]:focus,
textarea:active,
textarea:focus-visible,
textarea:focus {
  box-shadow: 0 0 0 var(--input-border-width)
    var(--background-modifier-border-focus);
}
@media (hover: hover) {
  .search-input-container input[type="search"]:hover,
  input.document-search-input:hover,
  input[type="email"]:hover,
  input[type="number"]:hover,
  input[type="password"]:hover,
  input[type="search"]:hover,
  input[type="text"]:hover,
  textarea:hover {
    box-shadow: 0 0 0 var(--input-border-width)
      var(--background-modifier-border-focus);
  }
}
textarea {
  padding: 1em;
}
.search-input-container input::placeholder,
input.document-search-input::placeholder,
input[type="email"]::placeholder,
input[type="number"]::placeholder,
input[type="password"]::placeholder,
input[type="search"]::placeholder,
input[type="text"]::placeholder,
textarea::placeholder {
  color: var(--theme-color-inputPlaceholder);
}
/* No matches state */
input.document-search-input.mod-no-match,
input.document-replace-input.mod-no-match {
  background-color: color-mix(
    in srgb,
    var(--background-input),
    var(--background-modifier-error) 50%
  );
}
/* #endregion */
/* #region   Selects – regular */
select,
.setting-item-control select .dropdown,
.workspace-drawer-active-tab-header {
  -webkit-appearance: none;
  appearance: none;
  border: none;
  box-shadow: var(--theme-shadow-control);
  background-color: var(--theme-color-controlBg);
  color: var(--theme-color-controlText);

  & > option {
    color: var(--theme-color-controlText);
  }
}
@media (hover: hover) {
  select:hover,
  .setting-item-control select:hover,
  .dropdown:hover {
    border: none;
    background-color: var(--theme-color-controlBgHover);
    color: var(--theme-color-controlTextHover);
  }
}
select:focus,
.dropdown:focus {
  box-shadow: 0 0 0 3px var(--background-modifier-border-focus);
  outline: none;
}

/* #endregion */
/* #region   Selects – lightweight */
.search-results-info .dropdown {
  border: none;
  box-shadow: var(--theme-shadow-control);
  background-color: var(--theme-color-controlBgLowWeight);
}
@media (hover: hover) {
  .search-results-info .dropdown:hover {
    border: none;
    background: var(--theme-color-controlBgHover);
    color: var(--theme-color-controlTextHover);
  }
}
.search-results-info .dropdown:focus {
  box-shadow: 0 0 0 3px var(--background-modifier-border-focus);
  outline: none;
}
/* #endregion */
/* #region   Multi-select pill */
.multi-select-container,
.metadata-property .multi-select-container {
  padding: 0.25em;
}
.multi-select-pill {
  padding: var(--pill-padding-y) var(--pill-padding-x);
}
.multi-select-pill-remove-button {
  margin: 0;
  border-radius: 100%;
}
@media (hover: hover) {
  .multi-select-pill-remove-button:hover {
    background: var(--pill-background-remove-hover);
  }
}
/* #endregion */
/* #region   Toolbars */
.canvas-controls,
.graph-controls,
.graph-controls.is-close,
.workspace-split:not(.mod-root) .graph-controls.is-close,
.graph-controls:not(.is-close),
.canvas-card-menu,
.canvas-menu,
.canvas-submenu {
  background: var(--theme-color-controlSetBg);
  border: none;
  padding: 0.25rem;
  gap: 0;
  box-shadow: var(--theme-shadow-input);
  border-radius: 0.5rem;
  width: fit-content;
}
.canvas-control-item,
.graph-controls-button,
.canvas-card-menu .canvas-card-menu-button {
  --icon-size: var(--icon-s);
  --icon-stroke: var(--icon-s-stroke-width);
  border-radius: var(--clickable-icon-radius);
  color: var(--theme-color-control);
  opacity: var(--icon-opacity);
  background-color: transparent;
  border: none;
}
/* Active state */
.canvas-control-item.has-active-menu {
  opacity: var(--icon-opacity-hover);
  color: var(--theme-color-controlLightweightActive);
  background-color: var(--theme-color-interactiveActive);
}
@media (hover: hover) {
  .canvas-control-item.has-active-menu:hover {
    background-color: var(--background-modifier-hover);
    color: var(--theme-color-controlHover);
  }
  .canvas-control-item:hover,
  .graph-controls-button:not(.mod-close):hover,
  .canvas-card-menu .canvas-card-menu-button:hover {
    color: var(--theme-color-controlHover);
    background-color: var(--background-modifier-hover);
  }
}
.graph-controls .setting-item {
  padding: 0.5em 0;
  margin: 0;
}
/* #endregion */
/* #region   Collapsible controls */
.metadata-properties-heading,
.embedded-backlinks .backlink-pane .tree-item-self,
.graph-controls .graph-control-section .tree-item-self,
.mod-collapsible,
.search-result-file-title {
  border-radius: var(--radius-s);
  color: var(--text-faint);
  font-size: var(--nav-item-size);
  font-weight: var(--font-medium);
  gap: 0.5em;
  margin: 0;
  padding: 0.25em 0.5em 0.25em 0;
  line-height: var(--theme-lineHeight-tight);
  display: flex;
}
@media (hover: hover) {
  .metadata-properties-heading:hover,
  .embedded-backlinks .backlink-pane .tree-item-self:hover,
  .graph-controls .graph-control-section .tree-item-self:hover,
  .mod-collapsible:hover,
  .search-result-file-title:hover {
    color: var(--nav-item-color-hover);
    background-color: var(--nav-item-background-hover);
    font-weight: var(--font-medium);
  }
}
.mod-collapsible > .tree-item-inner {
  padding-inline-start: 0;
}
.metadata-properties-heading:before {
  /* Override absolute positioning from app, so we're consistent with other collapsibles */
  position: static;
}
.metadata-properties-heading .collapse-indicator,
.embedded-backlinks .backlink-pane .tree-item-self .collapse-icon,
.graph-controls .graph-control-section .collapse-icon,
.tree-item-self .tree-item-icon.collapse-icon {
  color: var(--theme-color-control);
  display: flex;
  left: inherit;
  opacity: var(--icon-opacity);
  padding: 0;
  position: relative;
  width: 1em;
  margin: 0;
  align-items: center;
  justify-content: center;
}
.metadata-properties-heading .metadata-properties-title,
.embedded-backlinks .backlink-pane .tree-item-self .tree-item-inner,
.graph-controls .graph-control-section .tree-item-inner {
  font-size: var(--font-ui-smaller);
  font-weight: var(--font-medium);
}
@media (hover: hover) {
  .metadata-properties-heading:hover .collapse-indicator svg.svg-icon,
  .embedded-backlinks
    .backlink-pane
    .tree-item-self:hover
    .collapse-icon
    svg.svg-icon,
  .graph-controls
    .graph-control-section
    .tree-item-self:hover
    .collapse-icon
    svg.svg-icon,
  .mod-collapsible:hover .collapse-icon svg.svg-icon,
  .search-result-file-title:hover .collapse-icon svg.svg-icon,
  .tree-item-self:hover .tree-item-icon.collapse-icon svg.svg-icon,
  .tree-item-self:hover .menu-item-icon svg.svg-icon {
    color: var(--theme-color-controlHover);
  }
}
.backlink-pane > .tree-item-self .collapse-icon,
.outgoing-link-pane > .tree-item-self .collapse-icon {
  display: block;
  margin-left: 0;
  position: relative;
}
.metadata-properties-heading .collapse-indicator svg,
.embedded-backlinks .backlink-pane .tree-item-self .tree-item-icon svg,
.graph-controls .graph-control-section .collapse-icon svg {
  color: var(--theme-color-control);
}
.mod-root .metadata-content,
.backlink-pane .search-result-container,
.backlink-pane .search-result-file-matches,
.outgoing-link-pane .search-result-container,
.graph-control-section .tree-item-children {
  margin: 0 1em 1em 1em;
  font-size: var(--font-ui-small);
  padding-left: var(--nav-item-children-padding-left);
  padding: 0 0 0 var(--nav-item-children-padding-left);
  margin: 0 0 0 var(--nav-item-children-margin-left);
  border-left: var(--nav-indentation-guide-width) solid
    var(--nav-indentation-guide-color);
}
/* #endregion */
/* #region   Obsidian UI Checkboxes */
.checkbox-container {
  background-color: var(--background-input);
}
.checkbox-container.is-enabled {
  background-color: var(--interactive-accent);
}
input[type="checkbox"] {
  border: var(--theme-length-checkboxBorderWidth) solid
    var(--checkbox-border-color);
}
input[type="checkbox"]:checked:after {
  /* Scale check mark with container in slides */
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
}
@media (hover: hover) {
  input[type="checkbox"]:hover {
    background-color: var(--theme-color-controlUIHover);
  }
}
/* #endregion */
/* #region   Obsidian UI Radio buttons */
input[type="radio"] {
  -webkit-appearance: none;
  appearance: none;
  background-color: var(--background-input);
  border-radius: 50%;
  border: var(--theme-length-checkboxBorderWidth) solid
    var(--checkbox-border-color);
  box-sizing: border-box;
  color: var(--checkbox-border-color);
  display: inline-grid;
  font: inherit;
  height: 1.15em;
  margin: 0;
  place-content: center;
  transform: translateY(calc(-0.5 * var(--theme-length-checkboxBorderWidth)));
  width: 1.15em;
}
input[type="radio"]::before {
  content: "";
  width: 0.65em;
  height: 0.65em;
  border-radius: 50%;
  transform: scale(0);
  transition: 120ms transform ease-in-out;
  background-color: CanvasText;
  /* Use box-shadow as background-color doesn't print well */
  box-shadow: inset 1em 1em var(--checkbox-color);
}
input[type="radio"]:checked::before {
  transform: scale(1);
}
input[type="radio"]:focus {
  border: var(--theme-length-checkboxBorderWidth) solid
    var(--background-modifier-border-focus);
}
@media (hover: hover) {
  input[type="radio"]:hover {
    background-color: var(--theme-color-controlUIHover);
  }
}
/*   #endregion */
/* #endregion */
/* #region Item lists */
@media (hover: hover) {
  body:not(.is-grabbing) .tree-item-self.is-clickable:hover,
  .horizontal-tab-nav-item:hover,
  .vertical-tab-nav-item:hover {
    color: var(--nav-item-color-hover);
    background-color: var(--nav-item-background-hover);
    font-weight: var(--nav-item-weight-hover);
  }
}
.horizontal-tab-nav-item.is-active,
.vertical-tab-nav-item.is-active,
.nav-file-title.is-active,
.nav-folder-title.is-active {
  background-color: var(--interactive-accent);
  color: var(--nav-item-color-active);
}
.nav-folder.is-being-dragged-over {
  animation: 0.5s 1 alternate fadein;
  border-radius: var(--radius-s);
  border: solid 0.125rem var(--theme-color-dragTarget);
  background-color: var(--theme-color-dragTargetBg);
}
@media (hover: hover) {
  body:not(.is-grabbing) .tree-item.nav-file .tree-item-self.is-active:hover,
  .horizontal-tab-nav-item.is-active:hover,
  .vertical-tab-nav-item.is-active:hover,
  .nav-file-title.is-active:hover,
  .nav-folder-title.is-active:hover {
    background-color: var(--interactive-accent);
    color: var(--nav-item-color-active);
  }
}
.nav-folder-title {
  font-weight: var(--font-medium);
}
.nav-file-title,
.nav-folder-title {
  padding: 0;
}
.tree-item-inner {
  padding: var(--nav-item-padding);
}
.nav-file-title:before {
  content: none;
}
/* #endregion */
/* #region Tooltips */

.tooltip {
  color: var(--theme-color-notice);
  background-color: var(--theme-color-noticeBg);
  padding: 0.5em 1em;
}
/* #endregion */
/* #region Remote items */

.community-modal-search-results-wrapper,
.vault-list,
.sync-file-tree-container {
  background: var(--theme-gradient-topToBottom);
  border: 0;
  padding: 1.5em;
  gap: 1.5em;
}
.is-phone .community-modal-search-results-wrapper {
  padding: 1em;
  gap: 1em;
}
.vault-list-item,
.community-item,
.sync-file-tree-container > .list-item {
  background: var(--theme-color-communityItemBg);
  border-radius: var(--radius-m);
  border: none;
  box-shadow: var(--shadow-l);
  cursor: var(--cursor);
  padding: var(--size-4-3);
  position: relative;
}
.is-phone .vault-list-item,
.is-phone .community-item {
  border-radius: var(--radius-m);
  padding: 0.5em 1em;
}
@media (hover: hover) {
  .sync-file-tree-container > .list-item:hover,
  .community-item:hover {
    background: var(--theme-color-communityItemBgHover);
    color: var(--nav-item-color-hover);
    font-weight: var(--nav-item-weight-hover);
  }
}
.community-modal-search-results {
  padding: 0;
  gap: 1.5em;
}
.is-phone .community-modal-search-results {
  padding: 0;
  gap: 1em;
}
/* #endregion */
/* #region Modals */

/********* Prompts *********/

.prompt-input-container,
.is-phone .prompt-input-container {
  border-bottom: none;
  background: var(--background-secondary);
}
.prompt {
  background-color: var(--background-prompt);
}
.is-phone .prompt {
  --prompt-top: calc(var(--safe-area-inset-top) + var(--header-height) + 1em);
  box-shadow: var(--shadow-l);
}
input.prompt-input[type="text"] {
  background: var(--background-secondary);
  border-bottom: none;
  box-shadow: none;
}
input.prompt-input[type="text"]:focus {
  background: var(--background-secondary);
  border-bottom: none;
  box-shadow: none;
}
input[type="text"].prompt-input::placeholder {
  color: var(--theme-color-base);
}
.prompt-instructions {
  background: var(--background-secondary);
  border-top: 0;
}

/********** Modals **********/

/* Default modal */

.modal {
  padding: 0;
  overflow: hidden;
}
.modal-title {
  /* Space for modal-close-button in line with title */
  padding: 0.5em calc(var(--size-2-3) + 2rem);
  /* Align with top position for modal-close-button */
  margin-top: 0;
  margin-bottom: 0;
  font-size: var(--font-ui-medium);
  line-height: 1.4em;
}
.modal-bg,
.modal,
.prompt {
  animation: 0.5s 1 alternate fadein;
  animation-timing-function: ease-in-out;
}
.modal-content {
  margin: 0 0;
  /* Allow space for input borders */
  padding: var(--input-border-width) 2em;
  overflow: auto;
}
.modal-content p {
  margin: 0 0 0.5em 0;
}
.modal-content p:last-child {
  margin-bottom: 0;
}
.modal-content > hr {
  /* Used in the Manage Workspaces modal, but there's currently no way to target that. */
  border: none;
  margin: 1em 0;
}
.modal-button-container {
  margin-top: 0;
  padding: 1em 2rem;
}

.modal-content:has(.modal-button-container),
.modal-content:has(.button-container) {
  /* Sometimes the .modal-button-container is nested inside the .modal-content */
  overflow: scroll;
  background-color: var(--theme-color-modalContentBg);
  padding: 1em 2em;
}
.modal-content .modal-button-container {
  padding: 0;
}

/* Modals with sidebar layout */
.mod-sidebar-layout .modal-content {
  padding: 0;
  margin: 0;
}
.modal-sidebar,
.modal.mod-settings .vertical-tab-header {
  border-right: none;
  padding: 2.5em 1em 1em 1.5em;
  margin: 0;
  background: var(--theme-gradient-topToBottom);
  color: var(--theme-color-control);
  height: 100%;
  box-shadow: var(--shadow-s);
  z-index: 1;
}
/***** Resizeable modals *****/
body:not(.is-phone) .modal.mod-settings.mod-sidebar-layout,
body:not(.is-phone) .modal.mod-community-modal,
body:not(.is-phone) .modal.mod-sync-history {
  resize: both;
  width: var(--modal-width);
  min-width: 36rem;
  min-height: 20rem;
  border-bottom-right-radius: 0.25rem;
  box-shadow: var(--shadow-l);
}

/* Help modal */
.modal.mod-canvas-help .modal-content {
  height: 100%;
  overflow: scroll;
  padding-right: 1em;
}

/* Community modal */
.mod-community-modal {
  .modal-sidebar {
    padding: 0;
  }
  .community-modal-controls {
    background: var(--theme-color-settingsBg);
    padding: 2.5em 1.5em 1em 1.5em;
    box-shadow: var(--shadow-s);
    z-index: 1;
  }
  .modal-close-button {
    z-index: 2;
  }
  .community-modal-controls .setting-item {
    padding: 0;
    margin-bottom: 0.5em;
  }
  .modal-sidebar .setting-item-name {
    padding-left: 0;
  }
  .community-modal-controls .setting-item:first-child .setting-item-control {
    margin: 0;
  }
  .modal-content:has(.community-modal-details)
    .community-modal-controls
    .setting-item:first-child {
    float: none;
  }
}
.mod-community-modal:not(:has(.community-modal-details))
  .community-modal-controls
  .setting-item:first-child {
  /* Filter control */
  max-width: 60%;
  margin-bottom: 0.5em;
  padding-left: 2em;
  float: inline-end;
}
.community-modal-search-summary {
  margin: 0;
  padding: 0;
}
.community-modal-details {
  border: none;
}
.community-item {
  display: flex;
  flex-direction: column;
  gap: var(--size-2-1);
}
.community-item.is-selected {
  background: var(--theme-color-communityItemBgSelected);
}
.community-item.is-selected .flair.mod-pop,
.community-item.mod-active .flair.mod-pop {
  display: none;
}
@media (hover: hover) {
  .community-item.is-selected:hover .flair.mod-pop,
  .community-item.mod-active:hover .flair.mod-pop {
    display: none;
  }
}
.community-item.is-selected,
.community-item.is-selected .community-item-author,
.community-item.is-selected .community-item-repo,
.community-item.is-selected .community-item-downloads,
.community-item.is-selected .community-item-updated {
  color: var(--text-on-accent);
}
.community-item.mod-active {
  background: var(--theme-color-communityItemBgActive);
}
.community-item.mod-active .community-item-author,
.community-item.mod-active .community-item-repo,
.community-item.mod-active .community-item-downloads,
.community-item.mod-active .community-item-updated {
  color: var(--text-on-accent);
  opacity: 0.8;
}
@media (hover: hover) {
  .community-item:hover {
    color: var(--text-on-accent);
  }
  .community-item:hover .community-item-author,
  .community-item:hover .community-item-repo,
  .community-item:hover .community-item-downloads,
  .community-item:hover .community-item-updated {
    color: var(--text-on-accent);
    opacity: 0.8;
  }
  .community-item.is-selected:hover {
    background: var(--theme-color-communityItemBgSelected);
  }
  .community-item.is-selected:hover,
  .community-item.is-selected:hover .community-item-author,
  .community-item.is-selected:hover .community-item-repo,
  .community-item.is-selected:hover .community-item-downloads,
  .community-item.is-selected:hover .community-item-updated {
    color: var(--text-on-accent);
  }
  .community-item.mod-active:hover .community-item-author,
  .community-item.mod-active:hover .community-item-repo,
  .community-item.mod-active:hover .community-item-downloads,
  .community-item.mod-active:hover .community-item-updated {
    color: var(--text-on-accent);
    opacity: 0.8;
  }
}

/* Settings modal */
.modal.mod-settings .vertical-tab-header-group {
  border-right: none;
  padding: 0 0 1.5em 0;
}
.modal.mod-settings .vertical-tab-header-group-title {
  padding: 0 0.5em 0.5em 0.5em;
}
.mod-settings .vertical-tab-content {
  background: var(--theme-color-settingsBg);
  padding: 2em;
}
.modal-setting-nav-bar {
  border: none;
  padding: 0.5em 0 0 0;
}
.setting-item {
  /* Also used when editing bookmarks */
  border-top: none;
  padding: 0;
  margin-bottom: 1.5em;
}

/* Font settings modal */
.setting-font-list + .setting-item {
  border: none;
}

/* Debug modal */
.modal-content:has(.modal-button-container):has(.debug-textarea) {
  /* Show shadow below buttons */
  overflow: visible;
  padding: var(--input-border-width);
  margin-bottom: 2.5rem;
}
.debug-textarea {
  margin: 0;
  border-radius: 0;
}

/* #endregion */
/* #region Content area */

.view-content > .markdown-source-view.mod-cm6 > .cm-editor > .cm-scroller {
  padding: 0;
}
.markdown-source-view.mod-cm6.is-readable-line-width .cm-sizer,
.markdown-preview-view.is-readable-line-width .markdown-preview-sizer {
  margin-left: 0;
  margin-right: 0;
  max-width: none;
  width: 100%;
}
.markdown-source-view .cm-contentContainer {
  padding: 1rem 2rem;
}
.is-phone .markdown-source-view .cm-contentContainer {
  padding-top: 0;
  padding-bottom: 0;
}
.markdown-reading-view .mod-footer {
  margin: 1em -2rem 0 -2rem;
}

.markdown-source-view.mod-cm6.is-readable-line-width
  .cm-sizer
  .cm-contentContainer,
.markdown-preview-view.is-readable-line-width
  .markdown-preview-sizer
  > div:not(.mod-header):not(.mod-footer):not(.markdown-preview-pusher) {
  margin: 0 auto;
  max-width: var(--file-line-width);
  padding-left: 2rem;
  padding-right: 2rem;
  width: 100%;
}
.markdown-rendered .mod-header {
  margin-bottom: 3rem;
}
.is-phone .markdown-rendered .mod-header {
  margin-bottom: 0;
}
/* Override inline styles */
.cm-content {
  /* Live Preview */
  padding-bottom: 0 !important;
}
.markdown-preview-sizer {
  /* Reading Mode */
  padding-bottom: 0 !important;
}

/* Order in content area */
.inline-title {
  order: 0;
}
.mod-root .metadata-container,
.setting-properties-position-above
  .mod-root
  .is-live-preview
  .metadata-container {
  order: 1;
}
.setting-properties-position-below
  .mod-root
  .is-live-preview
  .metadata-container {
  margin-top: 1em;
  order: 3;
}
.setting-properties-position-below
  .mod-root
  .is-live-preview
  .embedded-backlinks {
  padding: 0 2rem 0.5rem 2rem;
}
body:not(.setting-properties-position-below)
  .mod-root
  .is-live-preview
  .embedded-backlinks {
  margin-top: 1em;
}
.cm-contentContainer {
  order: 2;
}
.embedded-backlinks {
  order: 3;
}

/* Consistent styles for inline metadata sections */
.mod-root .metadata-container,
.embedded-backlinks {
  animation: 0.5s 1 alternate fadein;
  background: var(--metadata-property-background);
  border-radius: 0;
  border: 0;
  font-family: var(--font-interface);
  margin: 0;
  padding: 0.5rem 2rem;
  transform: none;
  width: 100%;
}
body:not(.is-mobile) .mod-root .markdown-reading-view .metadata-container {
  width: calc(100% + 4rem);
  margin: 0 -2rem;
}

/* Tab content header */
.view-header {
  height: auto; /* Don't use --header-height */
  justify-content: space-between;
  padding: 0.5em;
}

/* Inline title (i.e. filename) */
.inline-title {
  width: 100%;
  margin: 0 auto;
  max-width: var(--file-line-width);
  padding: 0 2rem;
  text-align: center;
}
.view-header-title-container {
  display: none;
}
.show-inline-title .view-header-title-container {
  display: flex;
}
.view-header-title {
  display: none;
}
.show-inline-title.is-focused .workspace-leaf.mod-active .view-header-title {
  /* Use the "Display Inline Title" setting to show/hide the title in the header. */
  display: block;
}

@media (hover: hover) {
  .view-header-title-parent .view-header-breadcrumb:hover {
    background: transparent;
    cursor: auto;
  }
}
/* #endregion */
/* #region Properties */
.workspace > .workspace-split:not(.mod-root) .metadata-container {
  --metadata-divider-width: inherit;
}
.setting-properties-position-below
  .mod-root
  .is-live-preview
  .metadata-container {
  padding: 0.5em 2em 0 2em;
}
.setting-properties-position-below
  .mod-root
  .is-live-preview
  .metadata-container:has(~ .embedded-backlinks[style*="display: none"]) {
  padding-bottom: 0.5em;
}
.view-content .metadata-properties-heading .collapse-indicator svg.svg-icon,
.view-content
  .metadata-properties-heading
  .is-collapsed
  .collapse-indicator
  svg.svg-icon {
  color: var(--theme-color-control);
}
.metadata-properties-title {
  font-size: var(--font-ui-smaller);
  color: var(--text-faint);
  font-weight: var(--font-semibold);
  padding: 0;
  user-select: none;
}
.metadata-property {
  background-color: transparent;
  border: none;
  box-shadow: none;
  display: flex;
  gap: 0.5em;
  padding: var(--input-border-width);
}
.metadata-property:focus-within {
  background: var(--nav-item-background-hover);
  border-color: var(--nav-item-background-hover);
  box-shadow: none;
}
@media (hover: hover) {
  .metadata-property:hover {
    box-shadow: none;
  }
}
.metadata-property .metadata-property-key {
  align-items: center;
  display: flex;
  gap: 0.5em;
}
.metadata-property .metadata-property-key:focus-within {
  background: transparent;
}
input.metadata-property-key-input {
  color: var(--theme-color-control);
}
.metadata-property .multi-select-input {
  padding: var(--pill-padding-y) 0;
}
.metadata-property-icon:before {
  display: none;
}
/* #endregion */
/* #region File lists */

/* Styles used by both Files and Recent Files */

.nav-file-title {
  justify-content: space-between;
  padding: 0;
}
.nav-file-title-content,
.nav-folder-title-content {
  flex-grow: 1;
  padding: var(--nav-item-padding);
}
.nav-file-tag {
  background: transparent;
  border: solid 1px var(--nav-file-tag-border-color);
  color: var(--theme-color-navFileTag);
}
.nav-file-title.is-active .nav-file-tag {
  color: var(--theme-color-navFileTagActive);
  border-color: var(--theme-color-navFileTagActiveBorder);
}
@media (hover: hover) {
  /* No hover effect for vault title, as clicking doesn't do anything */
  .nav-folder.mod-root > .nav-folder-title:hover {
    color: inherit;
  }
}
/* #endregion */
/* #region Document search */
.document-search-container,
.mod-active .document-search-container,
.is-mobile .document-search-container,
.kanban-plugin__search-wrapper {
  animation: 0.5s 1 alternate fadein;
  background: var(--theme-color-controlSetBg);
  border: none;
  border-radius: var(--radius-l);
  box-shadow: var(--shadow-s);
  gap: 0.5em;
  margin: 0 auto;
  padding: 0.5em;
  width: auto;
}
.document-search,
.document-replace {
  gap: 0.5em;
  padding: 0;
}
.document-search-button {
  border: none;
  color: var(--theme-color-control);
}
.document-search-close-button,
.is-mobile .document-search .document-search-close-button,
.is-mobile .document-replace .document-search-close-button {
  top: calc(50% - 0.5em);
}
/* #endregion */

/* #region Core plugins */
/* #region   Core Plugin: Audio Recorder */
/* See also Embeds for the resulting embedded audio */

.side-dock-actions
  .side-dock-ribbon-action.clickable-icon.is-active:has(
    svg.svg-icon.lucide-mic
  ) {
  animation: pulse-animation 2s infinite;
  animation-timing-function: ease-in-out;
}
.side-dock-actions .side-dock-ribbon-action.clickable-icon.is-active:before {
  content: "REC";
  font-size: 0.8em;
  color: var(--theme-color-audioRecordingActive);
}
.side-dock-actions .side-dock-ribbon-action.clickable-icon.is-active svg {
  display: none;
}

@keyframes pulse-animation {
  0% {
    box-shadow: 0 0 0 0em var(--theme-color-redVeryTransparent);
  }
  50% {
    box-shadow: 0 0 0 0.25em var(--theme-color-redSlightlyTransparent);
  }
  100% {
    box-shadow: 0 0 0 0em var(--theme-color-);
  }
}
/* #endregion */
/* #region   Core Plugin: Backlinks */

.backlink-pane > .tree-item-self,
.outgoing-link-pane > .tree-item-self {
  color: var(--theme-color-control);
  width: inherit;
  padding: 0.25em 0.5em 0.25em 0;
}
.backlink-pane .tree-item-self .tree-item-inner,
.outgoing-link-pane .tree-item-self .tree-item-inner {
  padding-left: 0;
}
.backlink-pane .search-result:not(.is-collapsed) .search-result-file-title {
  color: var(--theme-color-control);
}
.backlink-pane .search-result-container {
  margin-left: 1em;
}
.search-result-file-match-replace-button {
  bottom: 0.375em;
}
.embedded-backlinks .backlink-pane .search-result-file-matches {
  background: none;
  box-shadow: none;
}
.embedded-backlinks {
  /* Terrible to use !important, but otherwise this gets an inline style enforcing a min height that can leave lots of unused space at the bottom. */
  min-height: 0 !important;
}
.setting-properties-position-below
  .mod-root
  .is-live-preview
  .metadata-container[data-property-count="0"]
  ~ .embedded-backlinks {
  padding-top: 0.5rem;
}
.embedded-backlinks .backlink-pane {
  padding: 0;
}
.embedded-backlinks .backlink-pane .tree-item-self .tree-item-flair-outer {
  /* Normally this would be positioned ot the right, but for embedded backlinks this overlaps with the controls */
  margin-left: 1em;
}
.embedded-backlinks .nav-buttons-container {
  top: 0;
  right: 0;
}
.embedded-backlinks .backlink-pane .search-result-file-title .tree-item-icon {
  position: relative;
  padding: 0;
  margin-left: 0;
  left: inherit;
}
.embedded-backlinks .backlink-pane .search-result-file-matches {
  margin-left: 1em;
}
.embedded-backlinks .backlink-pane .search-empty-state {
  margin: 0;
}
.embedded-backlinks .nav-header ~ .search-input-container {
  width: calc(100% - 150px);
  margin: 0 0 0 0;
}
.embedded-backlinks .backlink-pane > .tree-item-self {
  width: inherit;
}

/* stick backlinks in document to bottom */
.theme-setting-stickyEmbeddedLinks-on .cm-sizer > .embedded-backlinks,
.theme-setting-stickyEmbeddedLinks-on .mod-footer:has(> .embedded-backlinks) {
  position: sticky;
  bottom: 0;
  width: 100%;
  overflow-y: visible;

  & > .backlink-pane,
  & > .embedded-backlinks > .backlink-pane {
    overflow-y: scroll;

    &::-webkit-scrollbar {
      width: 0;
    }
  }
}
.theme-setting-stickyEmbeddedLinks-on
  .markdown-source-view.mod-cm6
  .cm-scroller {
  overflow-y: scroll;
  flex-grow: 0;
  flex-shrink: 1;
  flex-basis: 100%;
}
.theme-setting-stickyEmbeddedLinks-on
  .setting-properties-position-below
  .mod-root
  .is-live-preview
  .metadata-container {
  position: sticky;
  bottom: 0;
  overflow-y: visible;
}
/* #endregion */
/* #region   Core Plugin: Bookmarks */

.view-action.mod-bookmark {
  --icon-color: transparent;
  color: var(--theme-color-control);
}
.view-action.mod-bookmark:hover {
  color: var(--theme-color-controlHover);
}
/* #endregion */
/* #region   Core Plugin: Canvas */

.canvas-submenu {
  background: var(--theme-color-interactiveActive);
  top: calc(100% - 0.5em);
  box-shadow: none;
}
.canvas-card-menu {
  bottom: var(--theme-length-controlSetSpacing);

  .canvas-card-menu-button.mod-draggable:hover svg {
    transform: translateY(0);
    filter: none;
  }
}
.canvas-controls {
  gap: 0.5em;
  right: var(--theme-length-controlSetSpacing);
  top: var(--theme-length-controlSetSpacing);
}
.canvas-control-group {
  background: transparent;
  border: none;
  box-shadow: none;
}
/* #endregion */
/* #region   Core Plugin: Command Palette */
/*   No special styles: uses shared .prompt */
/* #endregion */
/* #region   Core Plugin: Files */

.workspace-leaf-content[data-type="file-explorer"] {
  .nav-folder .nav-folder .nav-file-title-content,
  .nav-folder .nav-folder .nav-folder-title-content {
    padding-left: 0;
  }
}
/* #endregion */
/* #region   Core Plugin: File Recovery */

.mode-sync-history {
}
.sync-history-list-container {
  border: none;
}
.sync-history-list {
  gap: 1em;
}
.sync-history-content-container {
  background-color: var(--theme-color-settingsBg);
}
.sync-history-content .setting-item,
.sync-history-content .setting-item:first-child,
.mod-sync-history .sync-history-content-buttons {
  background-color: var(--theme-color-settingsBg);
  border: none;
  margin: 0;
  padding: 1em;
}
.sync-history-content .setting-item:first-child {
  box-shadow: var(--shadow-s);
  z-index: 1;
}
.sync-history-list-item-header:hover {
  background: transparent;
}
/* #endregion */
/* #region   Core Plugin: Graph view */

.graph-controls {
  min-width: 12em; /* Make room for controls */
  top: var(--theme-length-controlSetSpacing);
  right: var(--theme-length-controlSetSpacing);
}
/* Smaller in sidebar */
.mod-sidedock {
  .graph-controls {
    font-size: 0.75rem;

    .graph-controls-button.mod-close,
    .graph-controls-button.mod-reset {
      top: 0.25rem;
    }
    .graph-controls-button.mod-close {
      right: 0.25rem;
      height: var(--input-height);
      width: var(--input-height);
    }
    .graph-controls-button.mod-reset {
      right: 2.25rem;
    }

    .graph-control-section .tree-item-inner {
      font-size: 0.75rem;
      padding: 0;
    }
    .graph-control-section-header,
    .setting-item-name,
    .search-input-container input[type="search"],
    button {
      font-size: 0.75rem;
    }
    .search-input-container input[type="search"],
    .mod-cta {
      width: 10em;
    }
  }
}

.graph-control-section {
  border: none;
  padding: 0;
}
.graph-control-section > .tree-item-self {
  padding: var(--nav-item-padding);
}
.graph-control-section:last-child .tree-item-children {
  padding-bottom: 0;
}
.graph-controls .graph-controls-button {
  display: none;
}
.graph-controls-button.mod-close {
  border-radius: 100%;
  color: var(--theme-color-control);
}
.graph-controls-button.mod-close:hover {
  color: var(--theme-color-control);
}
.graph-controls .tree-item-self .tree-item-icon {
  margin: 0;
}
.workspace-leaf-content[data-type="graph"],
.workspace-leaf-content[data-type="localgraph"] {
  & .view-content {
    overflow: hidden;
    border-radius: var(--tab-radius);
    background-color: var(--theme-color-graphViewBg);
  }
  & .view-content:before,
  & .view-content:after {
    background: transparent;
    box-shadow: var(--theme-shadow-graph);
    content: "";
    display: block;
    height: 1px;
    left: 0;
    pointer-events: none;
    position: absolute;
    right: 0;
    width: 100%;
  }
  & .view-content:before {
    top: -1px;
  }
  & .view-content:after {
    bottom: -1px;
  }
}
.mod-sidedock .workspace-leaf-content[data-type="graph"],
.mod-sidedock .workspace-leaf-content[data-type="localgraph"] {
  margin: 0.5rem 0;
}
.graph-view.color-arrow,
.graph-view.color-line {
  color: var(--theme-color-graphLine);
  opacity: 0.25;
}
.graph-view.color-fill {
  color: var(--theme-color-graphLine);
  opacity: 0.5;
}
.graph-view.color-fill-tag {
}
.graph-view.color-fill-attachment {
}
.graph-view.color-circle {
}
.graph-view.color-text {
  color: var(--theme-color-graphLine);
  opacity: 0.5;
}
.graph-view.color-fill-highlight {
}
.graph-view.color-line-highlight {
}
.graph-view.color-fill-unresolved {
}

/* #endregion */
/* #region   Core Plugin: Note composer */

/*   No special styles: uses shared .prompt */

/* #endregion */
/* #region   Core Plugin: Outgoing links */

.tree-item-self.is-clickable.outgoing-link-item {
  cursor: var(--cursor-link);
  text-decoration-line: var(--link-decoration);
  text-decoration-thickness: var(--link-decoration-thickness);
  color: var(--link-color);
  text-underline-offset: 0.125em;
}
.tree-item-self.is-clickable.outgoing-link-item .tree-item-inner-subtext {
  color: inherit;
  font-size: 85%;
}
body:not(.is-grabbing) .tree-item-self.is-clickable.outgoing-link-item:hover {
  background: transparent;
  color: var(--link-color-hover);
  font-weight: inherit;
  text-decoration-line: var(--link-decoration-hover);
}
.external-link:after {
  -webkit-mask-image: url('data:image/svg+xml; utf8, <svg width="24px" height="24px" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg" stroke="black" fill="none" stroke-width="1"><path d="M6.125,3.938L1.313,3.938L1.313,12.688L10.063,12.688L10.063,7.875M7.875,1.75L12.25,1.75L12.25,6.125M12.25,1.75L6.125,7.875"/></svg>');
  -webkit-mask-position: 50% 50%;
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-size: 100%;
  background-color: var(--link-external-color);
  background-image: none;
  content: "";
  display: inline-block;
  height: var(--font-text-size);
  margin-left: 0.25em;
  margin-top: -0.25em;
  vertical-align: middle;
  width: var(--font-text-size);
}
.external-link {
  background-image: none;
  padding-right: 0;
}
/* #endregion */
/* #region   Core Plugin: Page preview */

.popover {
  border: none;
  box-shadow: var(--shadow-l);
  padding: 0.5rem;
}
.popover.hover-popover {
  padding: 0.5rem;
}
.popover.hover-popover > .markdown-embed {
  background-color: var(--background-primary);
}
/* #endregion */
/* #region   Core Plugin: Publish */

.modal.mod-publish {
  padding: 0;
}
.modal.mod-publish .modal-title {
  font-size: var(--font-ui-medium);
  line-height: 1.4em;
  margin-bottom: 0;
  margin-top: 0;
  padding: 0.5em calc(var(--size-2-3) + 2rem);
}
/* #endregion */
/* #region   Core Plugin: Search */

.workspace-leaf-content[data-type="search"] {
  padding: 1rem;
}
.search-row,
.search-info-container,
.search-params,
.search-results-info {
  margin: 0 0 0.5rem 0;
}

.search-params .setting-item {
  margin: 0;
}
.search-result-container.mod-global-search {
  margin-top: 1em;
  padding: 0;
}
.search-results-children {
  display: flex;
  flex-direction: column;
  gap: 1em;
}
.search-results-children > div:first-child:not(.search-result) {
  /* I'm not sure what this div is intended for, but its presence creates an extra flex gap at the top of .search-results-children */
  display: none;
}
.search-results-info {
  border-bottom: none;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: 0.5em;
  margin: 0;
}
.search-results-result-count {
  width: auto;
}
.search-results-info .dropdown {
  max-width: 12em;
  text-align-last: left;
}
/* #endregion */
/* #region   Core Plugin: Slides */

body {
  /* Match slide typography to regular typography */
  --r-background-color: var(--background-primary);
  --r-block-margin: 20px;
  --r-code-font: var(--font-monospace-theme);
  --r-heading-color: var(--text-normal);
  --r-heading-font-weight: var(--h1-weight);
  --r-heading-font: var(--font-text-theme: );
  --r-heading-letter-spacing: normal;
  --r-heading-line-height: 1.2;
  --r-heading-margin: 0.67em 0 0 0;
  --r-heading-text-shadow: none;
  --r-heading-text-transform: none;
  --r-heading1-size: 2.5em;
  --r-heading1-text-shadow: none;
  --r-heading2-size: 1.6em;
  --r-heading3-size: 1.3em;
  --r-heading4-size: 1em;
  --r-link-color-dark: var(--link-color-active);
  --r-link-color-hover: var(--link-color-hover);
  --r-link-color: var(--link-color);
  --r-main-color: var(--text-normal);
  /* For some reason this seems to need to be in px */
  --r-main-font-size: 42px;
  --r-main-font: var(--font-text-theme);
}
.slides-close-btn {
  line-height: 0;
  width: 18px;
  height: 18px;
}
.reveal-viewport {
  background-color: var(--background-primary);
  color: var(--text-normal);
}
.slides-close-btn > svg > rect {
  display: none;
}
.slides-container .slide .controls button {
  background: transparent;
  border-radius: 100%;
  box-shadow: none;
  color: var(--theme-color-control);
  display: flex;
  align-content: center;
  justify-content: center;
  height: fit-content;
  width: fit-content;
  padding: 0.5rem;
}
.slides-container .slide .controls button:hover {
  background: var(--theme-color-navigationButtonBgHover);
}
.slides-container .slide .controls button .controls-arrow {
  width: 1.5rem;
  height: 1.5rem;
}
.reveal .controls .controls-arrow:before,
.reveal .controls .controls-arrow:hover:before {
  transform: translateX(0.5em) translateY(1em) rotate(45deg);
  width: 1rem;
}
.reveal .controls .controls-arrow:after,
.reveal .controls .controls-arrow:hover:after {
  transform: translateX(0.5em) translateY(1em) rotate(-45deg);
  width: 1rem;
}
/* #endregion */
/* #region   Core Plugin: Sync */

/* Deleted files modal */
.modal:has(.sync-file-tree-container) .modal-content {
  /* There's no button container below the list */
  padding-bottom: 0;
}
.modal .vault-list,
.modal .sync-file-tree-container {
  margin: 0 -2em;
}
.modal:has(.vault-list) .modal-title {
  box-shadow: var(--shadow-s);
  z-index: 1;
}
.modal:has(.vault-list) .modal-button-container {
  padding: 1em 0 0 0;
}
.is-phone .vault-list-item {
  /* Fit button snugly to right */
  padding-right: 0.5em;
}
.sync-file-tree-container ~ p {
  /* Targets bulk restore modal */
  padding: 1em 0;
}
.modal.mod-sync-log {
  padding: 0;
}
.modal.mod-sync-log .modal-title {
  font-size: var(--font-ui-medium);
  line-height: 1.4em;
  margin-bottom: 0;
  margin-top: 0;
  padding: 0.5em calc(var(--size-2-3) + 2rem);
}
.modal.mod-sync-log .setting-item {
  margin: 0;
}
.modal.mod-sync-log .sync-log-container {
  border: none;
  background: var(--theme-color-logBg);
  color: var(--theme-color-log);
  padding: 1.5em;
}
/* #endregion */
/* #region   Core Plugin: Tags view */

.tag-pane-tag > .tree-item-inner {
  /* Tags in sidebar styled the same as in notes, but ligher/darker to sit on colored background */
  background-color: var(--theme-color-tagBgSidebar);
  border-radius: var(--tag-radius);
  border: var(--tag-border-width) solid var(--tag-border-color);
  color: var(--theme-color-tagSidebar);
  font-weight: var(--tag-weight);
  padding: var(--tag-padding-y) var(--tag-padding-x);
  vertical-align: baseline;
}
.tag-pane-tag > .tree-item-inner:before {
  content: "#";
  display: inline;
}
.tag-pane-tag > .tree-item-inner > .tree-item-inner-text {
  display: inline;
}
.tag-pane-tag:hover {
  cursor: var(--cursor-link);
}
/* #endregion */
/* #endregion */
/* #region Community plugins */
/* #region   Community Plugin: Calendar */
.container:has(> .calendar) {
  margin: 0;
  padding: 0 !important;
}
.container:has(> .calendar) .nav {
  display: flex;
  justify-content: space-between;
  align-items: flex-end !important;
  margin: 0 !important;
  padding: 1em 0.5em 0.5em 0.5em !important;
}
.container:has(> .calendar) .nav .title {
  cursor: default;
  line-height: 1;
  padding: 0;
}
.container:has(> .calendar) .nav .right-nav {
  margin: 0;
  padding: 0;
}
.mod-right-split .container:has(> .calendar) {
  background-color: var(--theme-color-calendarBg);
  border-radius: 0.5em;
  padding: 0.5em !important;
}
.container > .calendar thead th {
  background: transparent;
  border: none;
  text-transform: none;
  font-size: var(--font-ui-small);
  font-weight: normal;
}
.container > .calendar tbody td {
  border: none;
  padding: 0;
  vertical-align: top;
}
.container > .calendar tbody td:not(:has(.adjacent-month)) .day {
  background-color: var(--theme-color-calendarDayBg);
  border-radius: 0.5em;
  margin: 1px;
}
@media (hover: hover) {
  .container > .calendar tbody td .day:hover {
    background: transparent;
  }
  .container > .calendar tbody td:not(:has(.adjacent-month)) .day:hover {
    background-color: var(--theme-color-calendarDayBg);
  }
}
/*   #endregion */
/* #region   Community Plugin: Clear Unused Images */

.modal:has(.unused-images-logs) {
  padding-bottom: 1em;
}

/*   #endregion */
/* #region   Community Plugin: Dataview */
/* Styled to match embeds */
.block-language-dataview {
  background-color: var(--embed-background);
  border-bottom: var(--embed-border-bottom);
  border-left: var(--embed-border-left);
  border-radius: 0.5rem;
  border-right: var(--embed-border-right);
  border-top: var(--embed-border-top);
  margin: 0;
}
@media (hover: hover) {
  /* Undo hover effect styles from app. There doesn't seem to be any clickable behaviour. */
  .markdown-source-view.mod-cm6 .cm-embed-block:not(.cm-table-widget):hover {
    box-shadow: none;
    border-radius: inherit;
    cursor: inherit;
    overflow: visible;
  }
}

/* List query */
.dataview.list-view-ul {
  padding: 1em 1em 1em 2em;
}

/* Table query */
.block-language-dataview:has(
    .dataview.table-view-table .dataview.table-view-table
  ) {
  border-radius: 0;
}
.dataview.table-view-table {
  border-collapse: separate;
  border-spacing: 0;
}
.dataview.table-view-table th {
  font-size: var(--table-header-size);
  font-weight: var(--table-header-weight);
  color: var(--table-header-color);
  font-family: var(--table-header-font);
  text-align: start;
  line-height: var(--line-height-tight);
}
.dataview.table-view-table thead th:first-of-type {
  border-top-left-radius: 0.5rem;
}
.dataview.table-view-table thead th:last-of-type {
  border-top-right-radius: 0.5rem;
  /* Make room for edit-block button */
  padding-right: 2.5rem;
}
.dataview.table-view-table tbody tr:last-of-type td:first-of-type {
  border-bottom-left-radius: 0.5rem;
}
.dataview.table-view-table tbody tr:last-of-type td:last-of-type {
  border-bottom-right-radius: 0.5rem;
}
.dataview.table-view-table tbody td,
.dataview.table-view-table tbody th {
  border-top: none;
  border-left: none;
}
.dataview.table-view-table tbody td:first-child,
.dataview.table-view-table tbody th:first-child {
  border-left: solid var(--table-header-border-width)
    var(--table-header-border-color);
}
.dataview.table-view-table th,
.dataview.table-view-table td {
  border: solid var(--table-header-border-width)
    var(--table-header-border-color);
}

/* Task query */
.dataview-container:has(.contains-task-list) {
  padding: 1em;
}
.dataview-container .contains-task-list {
  padding-inline-start: 0;
}
@media (hover: hover) {
  /* Style as a link */
  .dataview.task-list-item:hover,
  .dataview.task-list-basic-item:hover {
    box-shadow: none;
    background-color: transparent;
    cursor: var(--cursor-link);
    text-decoration-line: var(--link-decoration);
    color: var(--link-color);
  }
}

/* Calendar query */
/* Most styles shared with Calendar plugin */
.block-language-dataview:has(.calendar) {
  padding: 1em;
}

/* Empty queries */
div.dataview-error-box,
.block-language-dataview .dataview.dataview-error {
  align-items: center;
  border: 0.25rem dashed var(--background-secondary);
  display: flex;
  justify-content: center;
  min-height: 5em;
  width: 100%;
}
.block-language-dataview .dataview.dataview-error {
  background-color: transparent;
}
/*   #endregion */
/* #region   Community Plugin: Excalidraw */
.workspace-leaf-content[data-type="excalidraw"] {
  & .view-header {
    padding-bottom: 0;
  }
  & .excalidraw-view {
    /* I don't know why the default styles have 1px padding left and right. */
    padding: 0;
  }
}

.excalidraw-view {
  & .excalidraw {
    .FixedSideContainer_side_top {
      top: var(--theme-length-controlSetSpacing) !important;
      right: var(--theme-length-controlSetSpacing) !important;
      bottom: var(--theme-length-controlSetSpacing) !important;
      left: var(--theme-length-controlSetSpacing) !important;
    }
    .App-bottom-bar {
      gap: 0.5rem;
      margin: var(--theme-length-controlSetSpacing) !important;
    }

    /* Control sets */
    & .Island,
    & .mobile-misc-tools-container {
      background: var(--theme-color-controlSetBg);
      border: none;
      padding: 0.25rem;
      gap: 0;
      box-shadow: var(--theme-shadow-input);
      border-radius: 0.5rem;
    }
    & .mobile-misc-tools-container {
      gap: 0.5rem;
      right: 0;
      top: 0;
    }

    /* Layout structures inside control sets */
    & .Stack,
    & .App-toolbar-content {
      gap: 0.5em;
      padding: 0;
    }
    /* I think these are supposed to be spacers, but I don't think we need them. */
    & .App-toolbar-content > .ToolIcon__icon:empty {
      display: none;
    }

    /* Menus */
    & .dropdown-menu--mobile {
      width: auto;
    }
    & .dropdown-menu .dropdown-menu-container {
      background-color: var(--theme-color-menuBg);
      border: 0;
      box-shadow: var(--shadow-l);
      border-radius: var(--radius-l);
      margin: 0 1rem;
      padding: 0.5em;

      & > button {
        border: none;
        border-color: var(--nav-item-color);
        color: var(--nav-item-color);
        background-color: var(--nav-item-background);
        box-shadow: none;
      }

      /* Match other hotkeys */
      & .dropdown-menu-item__shortcut {
        background: transparent;
        border: solid 1px var(--theme-color-hotkey);
        color: var(--theme-color-hotkey);
        font-size: var(--font-ui-smaller);
        font-family: var(--font-interface);
        padding: 2px 6px;
        border-radius: var(--radius-s);
      }
    }
  }
}
@media (hover: hover) {
  .excalidraw-view {
    & .excalidraw {
      & .dropdown-menu .dropdown-menu-container {
        & > button:hover {
          border-color: var(--nav-item-color-hover);
          color: var(--nav-item-color-hover);
          background-color: var(--nav-item-background-hover) !important;
          font-weight: var(--nav-item-weight-hover);
          --icon-fill-color: var(--nav-item-color-hover);
        }

        & .dropdown-menu-item__shortcut {
          color: inherit;
          border-color: inherit;
        }
      }
    }
  }
}

/* Patch weird use of .is-mobile that clashes with Obsidian's use */
body:not(.is-mobile) .mobile-misc-tools-container .ToolIcon.is-mobile {
  --input-height: 30px;
}

/* Buttons – duplicated from lightweight buttons above */
.excalidraw-view .excalidraw .ToolIcon,
.excalidraw-view .excalidraw .dropdown-menu-button,
.excalidraw-view .excalidraw .sidebar-trigger__label-element {
  align-items: center;
  background-color: transparent;
  border-radius: var(--clickable-icon-radius);
  border: none;
  box-shadow: none;
  color: var(--theme-color-control);
  cursor: var(--cursor);
  display: flex;
  height: 2em;
  justify-content: center;
  min-height: var(--input-height);
  opacity: var(--icon-opacity);
  padding: 0.25rem;
  text-decoration: none;
  transition: opacity 0.15s ease-in-out;
  width: 2em;
  --icon-fill-color: var(--theme-color-control);
}
.is-mobile .excalidraw-view .excalidraw .ToolIcon,
.is-mobile .excalidraw-view .excalidraw .dropdown-menu-button {
  min-height: 44px;
  min-width: 44px;
}
.excalidraw-view .excalidraw .dropdown-menu-button:focus {
  box-shadow: none;
}
@media (hover: hover) {
  .excalidraw-view .excalidraw .Island .ToolIcon:hover,
  .excalidraw-view .excalidraw .dropdown-menu-button:hover,
  .excalidraw-view .excalidraw .sidebar-trigger__label-element:hover,
  .excalidraw-view .excalidraw .mobile-misc-tools-container .ToolIcon:hover,
  .excalidraw-view .excalidraw .reset-zoom-button:hover {
    color: var(--theme-color-controlHover);
    --icon-fill-color: var(--theme-color-controlHover);
    background-color: var(--background-modifier-hover);
  }
}
/* Active state */
.excalidraw-view .excalidraw .ToolIcon:has(.ToolIcon_type_radio:checked),
.excalidraw-view .excalidraw .dropdown-menu-button:has(~ .dropdown-menu) {
  opacity: var(--icon-opacity-hover);
  color: var(--theme-color-controlLightweightActive);
  background-color: var(--theme-color-interactiveActive);
  --icon-fill-color: var(--theme-color-controlLightweightActive);
}
.excalidraw-view
  .excalidraw
  .ToolIcon.fillable:has(.ToolIcon_type_radio:checked)
  .ToolIcon__icon,
.excalidraw-view
  .excalidraw
  .ToolIcon.fillable:has(.ToolIcon_type_radio:checked)
  .ToolIcon__keybinding,
.excalidraw .ToolIcon .ToolIcon_type_checkbox:checked + .ToolIcon__icon,
.excalidraw .ToolIcon .ToolIcon_type_radio:checked + .ToolIcon__icon {
  color: inherit;
  --icon-fill-color: inherit;
}

@media (hover: hover) {
  .excalidraw-view .excalidraw .ToolIcon:hover,
  .excalidraw-view .excalidraw .dropdown-menu-button:hover {
    color: var(--theme-color-controlHover);
    background-color: var(--background-modifier-hover);
  }
  .excalidraw-view
    .excalidraw
    .ToolIcon:has(.ToolIcon_type_radio:checked):hover,
  .excalidraw-view .excalidraw .dropdown-menu-button:focus:hover {
    background-color: var(--background-modifier-hover);
    color: var(--theme-color-controlHover);
  }
}
.excalidraw-view
  .excalidraw
  .ToolIcon
  .ToolIcon_type_checkbox:checked
  + .ToolIcon__icon,
.excalidraw-view
  .excalidraw
  .ToolIcon
  .ToolIcon_type_radio:checked
  + .ToolIcon__icon {
  background-color: transparent;
}

/* Icons inside buttons */
.excalidraw-view .excalidraw .Island .ToolIcon__icon,
.excalidraw-view .excalidraw .Island .ToolIcon__keybinding,
.excalidraw-view .excalidraw .mobile-misc-tools-container .ToolIcon__icon {
  --icon-size: var(--icon-s);
  --icon-stroke: var(--icon-s-stroke-width);
  border-radius: var(--clickable-icon-radius);
  color: inherit;
  opacity: var(--icon-opacity);
  background-color: transparent;
  border: none;
}
.excalidraw-view .excalidraw .sidebar-trigger {
  box-shadow: none;
  background: transparent;
}

.excalidraw-view .excalidraw .App-toolbar__divider {
  width: 1rem;
  height: 1.5rem;
  align-self: center;
  background-color: transparent;
  margin: 0 0.25rem;
}
.excalidraw-view .excalidraw .ToolIcon {
  cursor: default;
}

.excalidraw-view .excalidraw .zoom-actions,
.excalidraw-view .excalidraw .zoom-actions .Stack {
  background-color: transparent;
  border-radius: 0;
  box-shadow: none;
  padding: 0;
}
.excalidraw-view .excalidraw .zoom-button {
  background: transparent !important; /* Ugh. */
  border-radius: var(--clickable-icon-radius) !important;
  font-size: inherit !important;
}
@media (hover: hover) {
  .excalidraw-view .excalidraw .zoom-button:hover {
    background-color: var(--background-modifier-hover) !important; /* Ugh. */
  }
}

/* Match style of small notice */
.excalidraw .HintViewer {
  border-radius: 1em;
  background-color: var(--background-modifier-message);
  color: var(--theme-color-notice);
  box-shadow: var(--shadow-s);
  padding: 0.5em 0.75em;
  width: auto;

  & span {
    padding: 0;
  }
}
/*   #endregion */
/* #region   Community Plugin: Kanban */
.kanban-plugin {
  gap: 0.5rem;
}
.kanban-plugin__board > div {
  padding-top: 0;
}
.kanban-plugin__lane {
  background-color: var(--theme-color-kanbanLaneBg);
  border: none;
  border-radius: 0.5em;
  box-shadow: var(--shadow-s);
}
.kanban-plugin__lane-header-wrapper {
  border-bottom: none;
  gap: 0.5em;
  padding: 0.5em;
}
.kanban-plugin__lane-grip {
  margin-right: 0;
  color: var(--theme-color-control);
}
.kanban-plugin__lane-setting-wrapper > div {
  padding: 0.5em 1em;
}
.kanban-plugin__lane-setting-wrapper > div:last-child {
  border: none;
  margin-bottom: 0;
}
.kanban-plugin__grow-wrap > textarea {
  /* Style as regular text field */
  background: var(--background-input);
  border-radius: var(--input-radius);
  border: none;
  box-shadow: 0 0 0 var(--input-border-width) var(--theme-color-base);
  font-size: var(--font-ui-small);
  line-height: normal;
  padding: var(--size-4-1) var(--size-4-2);
}
.kanban-plugin__grow-wrap > textarea:focus {
  box-shadow: 0 0 0 var(--input-border-width) var(--theme-color-base);
}
.kanban-plugin__item-button-wrapper {
  border-top: none;
}
.kanban-plugin__lane-items {
  gap: 0.5em;
  margin: 0;
  padding: 0 0.5em;
}
.kanban-plugin__lane-items > .kanban-plugin__item-wrapper {
  margin: 0;
}
.kanban-plugin__item {
  border: none;
  box-shadow: var(--shadow-s);

  &.is-search-hit {
    box-shadow: inherit;
  }
}
.kanban-plugin__drag-container
  > .kanban-plugin__item-wrapper
  .kanban-plugin__item {
  border-color: none;
  box-shadow: var(--theme-shadow-draggingItem);
}
.kanban-plugin__item-title-wrapper:not(:only-child) {
  border-bottom: none;
}
.kanban-plugin__item-form {
  border: none;
}
.kanban-plugin__item-form .kanban-plugin__item-input-wrapper {
  padding: var(--input-border-width);
  border: none;
  background-color: transparent;
  border-radius: 0;
  min-height: var(--input-height);
}

/* Autocomplete menu when [[ is entered */
.kanban-plugin__autocomplete {
  font-size: inherit;
  min-width: 20ch;
  max-width: 40ch;
  max-height: 12rem;
}

.kanban-plugin__lane-form-wrapper {
  background: var(--theme-color-controlSetBg);
  border: none;
  display: flex;
  flex-direction: column;
  padding: 0.5rem;
  gap: 1rem;
  box-shadow: var(--theme-shadow-smallHigher);
  border-radius: 0.5rem;
  top: 0.5em;
  right: 0.5em;
  width: auto;

  & .kanban-plugin__lane-input-wrapper {
    padding: 0;
  }

  & .kanban-plugin__checkbox-wrapper {
    border: none;
    margin: 0;
    padding: 0;
  }

  & .kanban-plugin__lane-input-actions {
    padding: 0;
    justify-content: flex-end;
  }
}

/*   #endregion */
/* #region   Community Plugin: Map View */
.mod-sidedock .workspace-leaf-content[data-type="map"] {
  margin: 0.5rem 0;
}
.map-view-main {
  overflow: hidden;
  border-radius: var(--tab-radius);
  background-color: var(--theme-color-graphViewBg);
}
.map-view-main:before,
.map-view-main:after {
  /* Match graph view */
  background: transparent;
  box-shadow: var(--theme-shadow-graph);
  content: "";
  display: block;
  height: 1px;
  left: 0;
  pointer-events: none;
  position: absolute;
  right: 0;
  width: 100%;
  z-index: 2;
}
.map-view-graph-controls {
  background: var(--theme-color-controlSetBg);
  border: none;
  padding: 0.25rem;
  gap: 0;
  box-shadow: var(--theme-shadow-input);
  border-radius: 0.5rem;

  .graph-control-div {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
    padding: 0;
  }

  & select,
  & button {
    flex-basis: calc(50% - 0.325em);
    flex-shrink: 1;
    flex-grow: 0;
  }
  .graph-control-follow-div {
    display: flex;
    gap: 0.5em;
    align-content: baseline;
    justify-content: flex-start;
    padding: 0;
    flex-wrap: wrap;
  }
  .graph-control-follow-label {
    margin: 0.1875em 0 0 0;
  }

  .graph-control-content {
    width: 100%;
    flex-shrink: 0;
    padding: 0.5em 0;
    margin: 0;
    gap: 0.25em;
    overflow: visible;
  }
  /* Presets section */
  .graph-control-div:last-child .graph-control-content {
    /* Presets dropdown */
    & .dropdown.mv-map-control:first-child {
      flex-shrink: 0;
      flex-basis: 100%;
    }
  }
}
.map-view-main {
  .marker-cluster-small,
  .marker-cluster-small div {
    background-color: var(--theme-color-greenVeryTransparent);
  }
  .marker-cluster-medium,
  .marker-cluster-medium div {
    background-color: var(--theme-color-yellowVeryTransparent);
  }
  .marker-cluster-large,
  .marker-cluster-large div {
    background-color: var(--theme-color-orangeVeryTransparent);
  }
}

.map-view-graph-controls .lbl-triangle {
  border-top-left-radius: var(--radius-s);
  border-bottom-left-radius: var(--radius-s);
  font-size: var(--nav-item-size);
  font-weight: var(--font-medium);
  gap: 0.5em;
  margin: 0;
  padding: 0.25em 1.5em 0.25em 0.5em;
  line-height: var(--theme-lineHeight-tight);
  width: 1em;
  display: flex;
  flex-grow: 0;
  flex-shrink: 0;
  transition: none;
  position: relative;
  color: transparent;
  top: 0;
}
.map-view-graph-controls .lbl-triangle:before {
  position: absolute;
  top: 50%;
  left: 0.5em;
  content: "";
  background-color: var(--theme-color-control);
  display: block;
  width: 10px;
  height: 10px;
  margin-top: -5px;
  -webkit-mask-size: 100% 100%;
  -webkit-mask-image: url('data:image/svg+xml; utf8, <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"><path d="M3 8L12 17L21 8"></path></svg>');
  transition: transform 100ms ease-in-out;
  transform: rotate(-90deg);
}
.map-view-graph-controls .controls-toggle:checked + .lbl-triangle {
  transform: none;
}
.map-view-graph-controls .controls-toggle:checked + .lbl-triangle:before {
  transform: rotate(0deg);
}
.map-view-graph-controls .lbl-toggle {
  border-top-right-radius: var(--radius-s);
  border-bottom-right-radius: var(--radius-s);
  color: var(--text-faint);
  font-size: var(--nav-item-size);
  font-weight: var(--font-medium);
  gap: 0.5em;
  margin: 0;
  padding: 0.25em 0.5em 0.25em 0;
  line-height: var(--theme-lineHeight-tight);
  display: flex;
  width: auto;
  flex-grow: 1;
  flex-shrink: 1;
  transition: none;
}
@media (hover: hover) {
  .map-view-graph-controls .lbl-triangle:hover,
  .map-view-graph-controls
    .graph-control-div:has(.lbl-toggle:hover)
    .lbl-triangle {
    background-color: var(--nav-item-background-hover);
    color: transparent;
  }
  .map-view-graph-controls .lbl-triangle:hover:before,
  .map-view-graph-controls
    .graph-control-div:has(.lbl-toggle:hover)
    .lbl-triangle:before {
    background-color: var(--theme-color-controlHover);
  }
  .map-view-graph-controls .lbl-toggle:hover,
  .map-view-graph-controls
    .graph-control-div:has(.lbl-triangle:hover)
    .lbl-toggle {
    color: var(--nav-item-color-hover);
    background-color: var(--nav-item-background-hover);
    font-weight: var(--font-medium);
  }
}
.map-view-graph-controls
  .controls-toggle:checked
  + .lbl-triangle
  + .lbl-toggle
  + .graph-control-content {
  display: flex;
  flex-wrap: wrap;
}
.map-view-graph-controls .search-input-container {
  width: 100%;
  padding: var(--input-border-width);

  &:before {
    top: calc(
      (var(--input-height) - var(--search-icon-size)) / 2 +
        var(--input-border-width)
    );
  }
}
.map-view-main {
  .leaflet-control-container {
    .leaflet-top {
      top: var(--theme-length-controlSetSpacing);
    }
    .leaflet-right {
      right: var(--theme-length-controlSetSpacing);
    }
    .leaflet-bottom {
      bottom: var(--theme-length-controlSetSpacing);
    }
    .leaflet-left {
      left: var(--theme-length-controlSetSpacing);
    }
  }
}
.map-view-main .leaflet-control-container .leaflet-top.leaflet-right {
  background: var(--theme-color-controlSetBg);
  border: none;
  padding: 0.25rem;
  gap: 0;
  box-shadow: var(--theme-shadow-input);
  border-radius: 0.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;

  & .leaflet-control {
    border: none;
    margin: 0;
  }

  & .leaflet-control-zoom {
    padding: 0;
  }

  & a {
    align-items: center;
    background-color: transparent;
    border-radius: var(--clickable-icon-radius);
    border: none;
    box-shadow: none;
    color: var(--theme-color-control);
    cursor: var(--cursor);
    display: flex;
    height: 2em;
    justify-content: center;
    min-height: var(--input-height);
    opacity: var(--icon-opacity);
    padding: 0.25rem;
    text-decoration: none;
    transition: opacity 0.15s ease-in-out;
    width: 2em;
    font-size: 1rem;

    &.on {
      opacity: var(--icon-opacity-hover);
      color: var(--theme-color-controlLightweightActive);
      background-color: var(--theme-color-interactiveActive);
    }
  }
  @media (hover: hover) {
    & a:hover {
      color: var(--theme-color-controlHover);
      background-color: var(--background-modifier-hover);
    }
  }
}
.leaflet-touch .leaflet-bar a:first-child,
.leaflet-touch .leaflet-bar a:last-child {
  border-radius: var(--clickable-icon-radius);
}

.cm-embed-block .block-language-mapview .map-view-main {
  background-color: var(--embed-background);
  border-bottom: var(--embed-border-bottom);
  border-left: var(--embed-border-left);
  border-radius: 0.5rem;
  border-right: var(--embed-border-right);
  border-top: var(--embed-border-top);
  margin: 0;

  /* Open button */
  & .map-view-graph-controls > .mv-map-control.mv-control-button {
    border: none;
    box-shadow: var(--theme-shadow-control);
    background-color: var(--theme-color-controlBgLowWeight);
    color: var(--theme-color-controlText);
    font-size: var(--font-ui-smaller);
    line-height: var(--line-height-tight);
    min-height: 0;
    padding: 0.25em 0.5em;
    width: 100%;
    margin-bottom: 0.5em;
  }
  & .map-view-graph-controls > .mv-map-control.mv-control-button :focus {
    box-shadow: 0 0 0 3px var(--background-modifier-border-focus);
    outline: none;
  }
  @media (hover: hover) {
    & .map-view-graph-controls > .mv-map-control.mv-control-button :hover {
      border: none;
      background: var(--theme-color-controlBgHover);
      color: var(--theme-color-controlTextHover);
    }
  }
}
/* Map view preset save-as modal */
.modal-content:has(.newPresetDialogGrid) {
  padding: 1rem 1rem 1rem 2.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.5em;

  .newPresetDialogLine:last-child {
    display: flex;
    justify-content: flex-end;

    > button {
      margin-left: 0.5rem;
    }
  }
}
.geolink:has(.cm-underline) {
  /* Don't make a double underline */
  text-decoration-line: none;
}
/* #endregion */
/* #region   Community Plugin: Recent Files */
.recent-files-title {
  align-items: center;
  padding-right: 0.375em;
}
/*   #endregion */
/* #region   Community Plugin: Tasks */
.block-language-tasks {
  background-color: var(--embed-background);
  border-bottom: var(--embed-border-bottom);
  border-left: var(--embed-border-left);
  border-radius: 0.5rem;
  border-right: var(--embed-border-right);
  border-top: var(--embed-border-top);
  margin: 0;
  padding: 0.5em;
}
.tasks-edit {
  display: inline-flex;
}
.tasks-modal form {
  display: flex;
  flex-direction: column;
  gap: 1.5em;
}
.tasks-modal-section + .tasks-modal-section {
  margin: 0;
}
.tasks-modal-priorities {
  row-gap: 1em;
  column-gap: 0.5em;
}
.tasks-modal-dates {
  row-gap: 0.5em;
  column-gap: 0.5em;
}
.tasks-modal-priorities label {
  grid-row-end: 3;
  margin: 0;
  padding: 0 0.25em;
}

/*   #endregion */
/* #region   Community Plugin: Style Settings */
/* Settings modal */
.style-settings-heading {
  border-bottom: none;
  margin-top: 1.5em;
}
.style-settings-heading[data-level="0"] {
  margin-bottom: 0;
}
.setting-item + div > .style-settings-heading[data-level="0"],
.setting-item + .style-settings-heading[data-level="0"] {
  margin-top: 1.5em;
}

/* Import/export modals */
.modal-style-settings {
  /* Show shadow below buttons */
  overflow: visible;

  & .modal-content {
    padding: 1em 1em 1em 1em;
    margin-bottom: 0;
  }
  & .setting-item {
    margin-bottom: 1em;
    align-items: baseline;
  }
  & .setting-item:first-child {
    margin-left: 1.5em;
  }
  & textarea {
    margin-top: var(--input-border-width);
    margin-bottom: var(--input-border-width);
  }
}
/*   #endregion */
/* #endregion */
